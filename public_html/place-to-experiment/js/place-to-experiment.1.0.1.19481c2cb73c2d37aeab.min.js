webpackJsonp([2],[,function(e,t,i){"use strict";t.a={methods:{debug:function(e){console.log(e)},showMountedMessage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.debug(e.$options.name+" mounted "+t)},reload:function(){window.location.reload()},openUrl:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?window.open(e,"_blank"):window.location.href=e},scrollToTop:function(){window.scrollTo(0,0)},getErrorMessage:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t){if(t.hasOwnProperty("data"))if(t.data.hasOwnProperty("status"))var s=t.data.status;else s="";for(var r=0;r<e.$children.length;r++)if("notification-message"===e.$children[r].$options.name&&e.$children[r].status===s)return e.$children[r].message;if(i)for(var n=0;n<e.$root.$children.length;n++)if("notification-message"===e.$root.$children[n].$options.name&&e.$root.$children[n].status===s)return e.$root.$children[n].message;if(t.hasOwnProperty("data")&&t.data.hasOwnProperty("message"))return t.data.message+" ("+e.$options.name+":"+t.data.status+")"}return""},getResponseStatus:function(e,t){return!!e.hasOwnProperty(t)&&e[t]},setResponseStatus:function(e,t,i){return!!t&&(t.hasOwnProperty("data")&&(this.debug("setting response status: "+i+" = "+t.data.status),this.$set(e,i,t.data.status)),e)},getResponseMessage:function(e){var t=!1;return e&&e.hasOwnProperty("data")&&e.data.hasOwnProperty("message")&&(t=e.data.message),t||"response not JSON format or message key missing."},getResponseData:function(e){var t=!1;return e.hasOwnProperty("data")&&(t=e.data),t||"response not JSON format."},setValidatorLocale:function(e,t){e.setLocale(t)},currentPath:function(){return window.location.pathname},currentUrl:function(){return window.location.href},isEqual:function(e,t){return e===t},getEmbedCode:function(e,t,i){return'<iframe width="'+t+'" height="'+i+'" src="'+e+'" frameborder="0" allowfullscreen></iframe>'}},computed:{rootUrl:function(){return window.location.protocol+"//"+window.location.hostname+"/"}}}},function(e,t,i){"use strict";var s=i(22),r=i.n(s),n=i(158);t.a={data:function(){return{isUserAuthenticated:!1,isUserAdmin:!1,isUserEditor:!1,acl:[],userFirstName:"",userLastName:"",userEmail:"",credentials:{email:"",password:"",first_name:"",last_name:""},retype_password:""}},methods:{logoutMixin:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];window.localStorage.removeItem("token"),window.localStorage.removeItem("userData"),e&&(window.location.href=e),this.$root.eventBus.$emit("logout")},getAuthorizationHeaderMixin:function(){if(!this.isUserAuthenticatedMixin())return"";try{return"Bearer "+this.getLocalStorageObjectMixin("token").string}catch(e){return this.debug("Exception getting token: "+e),""}},setUserAcl:function(){this.isUserEditorMixin(),this.isUserAdminMixin()},isUserAuthenticatedMixin:function(){var e=!1;if(this.phpLogin){this.debug("checking PHP login");for(var t=0;t<this.$root.$children.length;t++)"php-login"===this.$root.$children[t].$options.name&&(e=this.$root.$children[t].loggedInBoolean)}else if(this.getLocalStorageObjectMixin("token")){var i=this.getLocalStorageObjectMixin("token");this.getTimeDifference(i.timestamp)<n.a.tokenTimeout?e=!0:(this.debug("token expired"),this.logoutMixin(!1))}return this.isUserAuthenticated=e,e},isUserEditorMixin:function(){var e=!1;if(this.isUserAuthenticatedMixin())for(var t=0;t<this.acl.length;t++)"edit"===this.acl[t]&&(e=!0);return this.isUserEditor=e,e},isUserAdminMixin:function(){var e=!1;if(this.isUserAuthenticatedMixin())for(var t=0;t<this.acl.length;t++)"admin"===this.acl[t]&&(e=!0);return this.isUserAdmin=e,e},setLocalStorageObjectMixin:function(e,t){window.localStorage.setItem(e,r()(t))},getLocalStorageObjectMixin:function(e){var t=window.localStorage.getItem(e);return t&&JSON.parse(t)},getTimeDifference:function(e){return this.getTimestamp()-e},getTimestamp:function(){return Date.now()},getUserData:function(){if(this.isUserAuthenticatedMixin()){var e=this.getLocalStorageObjectMixin("userData");e&&(e.hasOwnProperty("first_name")&&(this.userFirstName=e.first_name),e.hasOwnProperty("last_name")&&(this.userLastName=e.last_name),e.hasOwnProperty("email")&&(this.userEmail=e.email))}else this.userFirstName="",this.userLastName="",this.userEmail=""},userName:function(){return this.userFirstName+" "+this.userLastName}},created:function(){this.$root.eventBus.$on("login",function(){this.setUserAcl()}.bind(this)),this.$root.eventBus.$on("logout",function(){this.setUserAcl()}.bind(this))},mounted:function(){this.setUserAcl()}}},,,,,,,,,function(e,t,i){"use strict";t.a={methods:{createExperimentMixin:function(e,t,i){return this.$http.post(e+"/experiments/",t,{headers:{Authorization:i}})},getExperimentMixin:function(e,t,i,s){return s?this.$http.get(e+"/experiments/"+t+"/"+i,{headers:{Authorization:s}}):this.$http.get(e+"/experiments/"+t+"/"+i)},getExperimentsPreviewMixin:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments[3],r="";if(i.length>0){r="?";for(var n=0;n<i.length;n++){for(var o in i[n])r+=o,r+="=",r+=i[n][o];n+1!==i.length&&(r+="&")}}return s?this.$http.get(e+"/experiments/preview/"+t+r,{headers:{Authorization:s}}):this.$http.get(e+"/experiments/preview/"+t+r)},updateExperimentSettingsMixin:function(e,t,i,s){return this.$http.patch(e+"/experiments/"+t+"/settings/",i,{headers:{Authorization:s}})},updateExperimentLanguageMixin:function(e,t,i,s,r){return this.$http.patch(e+"/experiments/"+t+"/language/"+i+"/",s,{headers:{Authorization:r}})},updateExperimentCustomLanguageMixin:function(e,t,i,s,r){return this.$http.patch(e+"/experiments/"+t+"/custom_language/"+i+"/",s,{headers:{Authorization:r}})},updateExperimentImageCollectionMixin:function(e,t,i,s){return this.$http.patch(e+"/experiments/"+t+"/image_collection/",i,{headers:{Authorization:s}})},getTagsForExperimentsMixin:function(e,t){return this.$http.get(e+"/experiments/tags/"+t)},setTagsForExperimentMixin:function(e,t,i,s){return this.$http.post(e+"/experiments/"+t+"/tags/",i,{headers:{Authorization:s}})},updateExperimentFundingMixin:function(e,t,i,s){return this.$http.patch(e+"/experiments/"+t+"/funding/",i,{headers:{Authorization:s}})},addExperimentLikeMixin:function(e,t,i){return this.$http.post(e+"/experiments/"+t+"/likes/",{},{headers:{Authorization:i}})},removeExperimentLikeMixin:function(e,t,i){return this.$http.delete(e+"/experiments/"+t+"/likes/",{headers:{Authorization:i}})},setExperimentLinksMixin:function(e,t,i,s){return this.$http.post(e+"/experiments/"+t+"/links/",i,{headers:{Authorization:s}})},moveExperimentToNextStageMixin:function(e,t,i){return this.$http.post(e+"/experiments/"+t+"/stagemoves/",{},{headers:{Authorization:i}})},getExperimentPicUrl:function(e,t,i,s,r){if(t.image_collection){if(t.image_collection[i]){return"https://d1ncrxda1lmimh.cloudfront.net/karolina-fund/image/fetch/c_thumb,h_"+s+",w_"+r+"/"+t.image_collection[i].url}return e}return e},getExperimentPreviewPicUrl:function(e,t,i,s){if(t){return"https://d1ncrxda1lmimh.cloudfront.net/karolina-fund/image/fetch/c_thumb,h_"+i+",w_"+s+"/"+t}return e},getTeamPicUrl:function(e,t,i,s){if(t){return"https://d1ncrxda1lmimh.cloudfront.net/karolina-fund/image/fetch/c_thumb,h_"+i+",w_"+s+"/"+t}return e},setTagsForExperiment:function(e,t,i){var s=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.getAuthorizationHeaderMixin();this.setTagsForExperimentMixin(e,t,i,o).then(function(e){s.debug("setTagsForExperimentMixin response: "),s.debug(s.getResponseData(e)),s.responseStatus=s.setResponseStatus(s.responseStatus,e,"setTagsForExperiment"),"function"==typeof r&&(n?r(n):r())},function(e){s.debug("setTagsForExperimentMixin error: "),s.debug(s.getResponseMessage(e.response)),s.responseStatus=s.setResponseStatus(s.responseStatus,e.response,"setTagsForExperiment");var t=s.getErrorMessage(s,e.response);s.setTagsForExperimentNotification({message:t,timeout:5e3,type:"error"}),"function"==typeof r&&r()})}}}},,,,,,,,,,function(e,t,i){"use strict";t.a={methods:{getUserTokenMixin:function(e,t){return this.$http.post(e+"/users/tokens/",t)},registerUserMixin:function(e,t){return this.$http.post(e+"/users/",t)},getUsersPreviewMixin:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i="";if(t.length>0){i="?";for(var s=0;s<t.length;s++){for(var r in t[s])i+=r,i+="=",i+=t[s][r];s+1!==t.length&&(i+="&")}}return this.$http.get(e+"/users/preview/"+i)},getProfileMixin:function(e,t,i){return this.$http.get(e+"/users/"+t+"/profile",{headers:{Authorization:i}})},getMyProfileMixin:function(e,t){return this.$http.get(e+"/users/me/profile",{headers:{Authorization:t}})},updateMyProfileMixin:function(e,t,i){return this.$http.patch(e+"/users/me/profile",t,{headers:{Authorization:i}})},updateMyProfileImageCollectionMixin:function(e,t,i){return this.$http.patch(e+"/users/me/profile/image_collection",t,{headers:{Authorization:i}})},changeMyPasswordMixin:function(e,t,i){return this.$http.post(e+"/users/me/password",t,{headers:{Authorization:i}})},resetPasswordMixin:function(e,t,i){return this.$http.post(e+"/users/password_resets/",t,{headers:{Authorization:i}})},changePasswordMixin:function(e,t,i){return this.$http.post(e+"/users/password_changes/",t,{headers:{Authorization:i}})},setUserLinksMixin:function(e,t,i){return this.$http.post(e+"/users/me/links/",t,{headers:{Authorization:i}})},setSkillsForUserMixin:function(e,t,i){return this.$http.post(e+"/users/me/skills/",t,{headers:{Authorization:i}})},setTagsForUserMixin:function(e,t,i){return this.$http.post(e+"/users/me/tags/",t,{headers:{Authorization:i}})},getProfilePicUrl:function(e,t,i,s){if(t.image_collection){if(t.image_collection.profile){return"https://d1ncrxda1lmimh.cloudfront.net/karolina-fund/image/fetch/c_thumb,h_"+i+",w_"+s+"/"+t.image_collection.profile.url}return e}return e},getProfilePreviewPicUrlLegacy:function(e,t,i,s){if(t.image_filename){return"https://d1ncrxda1lmimh.cloudfront.net/karolina-fund/image/fetch/c_thumb,h_"+i+",w_"+s+"/https://s3-eu-west-1.amazonaws.com/kfunddynamic/profile_pics/"+t.user_id+"/square/"+t.image_filename}return e},getProfilePreviewPicUrl:function(e,t,i,s){if(t.image){return"https://d1ncrxda1lmimh.cloudfront.net/karolina-fund/image/fetch/c_thumb,h_"+i+",w_"+s+"/"+t.image}return e}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";t.a={methods:{uploadImageFileMixin:function(e,t,i){return this.$http.post(e+"/files/images/",t,{headers:{Authorization:i}})}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";t.a={experiment:{stage:"0",experiment_id:"1",custom_language:!1,language:!1,tags:[],team:null,links:[]},experiment_preview:{stage:"0",experiment_id:"1",image:null,owner_name:"",title:"Experiment title",short_description:"Short description."},acl:["view"],profile:{user_id:1,first_name:"",last_name:"",short_description:"",long_description:"",tags:[],links:[]},profile_preview:{user_id:1,first_name:"",last_name:"",short_description:"",image:null,links:[],tags:[]},supportedEditors:["sirtrevor","quill"],defaultPlaceholderImageUrl:"/img/placeholder.png",defaultPlaceholderVideoUrl:"/img/placeholder_video.png",defaultPlaceholderProfileUrl:"/img/placeholder_profile.png"}},function(e,t,i){i.p=window.placeToExperimentAssetPath},,,function(e,t,i){var s=i(0)(i(163),i(350),null,null,null);e.exports=s.exports},function(e,t,i){var s=i(0)(i(164),i(365),null,null,null);e.exports=s.exports},function(e,t,i){var s=i(0)(i(165),i(359),null,null,null);e.exports=s.exports},function(e,t,i){var s=i(0)(i(166),i(369),null,null,null);e.exports=s.exports},function(e,t,i){var s=i(0)(i(167),i(370),null,null,null);e.exports=s.exports},function(e,t,i){var s=i(0)(i(168),i(352),null,null,null);e.exports=s.exports},function(e,t,i){var s=i(0)(i(169),i(367),null,null,null);e.exports=s.exports},function(e,t,i){var s=i(0)(i(170),i(355),null,null,null);e.exports=s.exports},function(e,t,i){var s=i(0)(i(171),i(358),null,null,null);e.exports=s.exports},function(e,t,i){var s=i(0)(i(172),i(348),null,null,null);e.exports=s.exports},function(e,t,i){var s=i(0)(i(173),i(354),null,null,null);e.exports=s.exports},function(e,t,i){var s=i(0)(i(174),i(363),null,null,null);e.exports=s.exports},function(e,t,i){var s=i(0)(i(175),i(353),null,null,null);e.exports=s.exports},function(e,t,i){var s=i(0)(i(176),i(364),null,null,null);e.exports=s.exports},function(e,t,i){var s=i(0)(i(177),i(356),null,null,null);e.exports=s.exports},function(e,t,i){var s=i(0)(i(178),i(360),null,null,null);e.exports=s.exports},function(e,t,i){var s=i(0)(i(179),i(366),null,null,null);e.exports=s.exports},function(e,t,i){var s=i(0)(i(180),i(346),null,null,null);e.exports=s.exports},function(e,t,i){var s=i(0)(i(181),i(357),null,null,null);e.exports=s.exports},function(e,t,i){var s=i(0)(i(182),i(344),null,null,null);e.exports=s.exports},function(e,t,i){var s=i(0)(i(183),i(361),null,null,null);e.exports=s.exports},function(e,t,i){var s=i(0)(i(184),i(368),null,null,null);e.exports=s.exports},,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";t.a={tokenTimeout:4314e4}},function(e,t,i){"use strict";function s(e){var t=e.title,i=e.message,s=e.type,r=e.timeout,n=e.cb;return c.a[s](i,t,r,n)}Object.defineProperty(t,"__esModule",{value:!0});var r=i(138),n=i.n(r),o=i(111),a=(i.n(o),i(113)),u=i.n(a),d=i(109),p=i.n(d),g=i(136),l=i.n(g),h=i(112),c=i.n(h),m=i(137),f=i.n(m),x=i(64),w=(i.n(x),i(110)),v=i(2),b=i(1),E=i(108),M=i.n(E);n.a.component("authorization",i(115)),n.a.component("navbar",i(126)),n.a.component("image-upload",i(121)),n.a.component("create-experiment",i(116)),n.a.component("experiment-index",i(118)),n.a.component("experiment-map",i(119)),n.a.component("profile-index",i(129)),n.a.component("reward-index",i(131)),n.a.component("profile-page",i(130)),n.a.component("admin",i(114)),n.a.component("experiment-page",i(120)),n.a.component("tags",i(135)),n.a.component("experiment-language",function(){return i.e(0).then(i.bind(null,338))}),n.a.component("discourse-sso",i(117)),n.a.component("leiki",i(123)),n.a.component("leiki-testbed",i(122)),n.a.component("password-reset",i(128)),n.a.component("notification-message",i(127)),n.a.component("links",i(124)),n.a.component("modal",i(125)),n.a.component("sign-in",i(132)),n.a.component("sign-out",i(133)),n.a.component("sign-up",i(134)),c.a.init({types:{success:"success",error:"error",info:"info",warn:"warn"}}),n.a.use(l.a,{success:s,error:s,info:s,warn:s}),n.a.use(u.a,{fieldsBagName:"formFields"}),n.a.use(f.a),n.a.use(x),n.a.prototype.$http=p.a;var y=new n.a({});n.a.filter("truncate",function(e,t,i){if(e){if(e.length>t){var s=e.substr(0,t);return(s=s.substr(0,Math.min(s.length,s.lastIndexOf(" "))))+i}return e}return e}),n.a.directive("autosize",{bind:function(e){n.a.nextTick(function(){M()(e)})},update:function(e,t){n.a.nextTick(function(){e.value=t.value,M.a.update(e)})},unbind:function(e){M.a.destroy(e)}}),new n.a({el:"#app",data:{eventBus:y,placeholders:w.a},mixins:[v.a,b.a]})},function(e,t,i){"use strict";t.a={methods:{getCampaignMixin:function(e,t,i){return this.$http.get(e+"/campaigns/"+t+"/"+i)}}}},function(e,t,i){"use strict";t.a={methods:{getDashboardMixin:function(e){return this.$http.get(e+"/dashboard/")}}}},function(e,t,i){"use strict";t.a={methods:{getRewardPicUrl:function(e,t,i,s){if(null!==t){return"https://d1ncrxda1lmimh.cloudfront.net/karolina-fund/image/fetch/c_thumb,h_"+i+",w_"+s+"/"+t}return e}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(37),r=i.n(s),n=i(11),o=i(161),a=i(2),u=i(1);t.default={name:"admin",data:function(){return{responseStatus:{},experiment:this.common.placeholders.experiment_preview,experiments:[],dashboardData:{},currentData:[],currentPage:[],itemsPerPageDefault:10,selectedItemsPerPage:"",offset:0,pagination:{total:0,current_page:1,last_page:1,from:0,to:0},searchTerm:"",sortField:{name:"id",direction:"desc",sortable:!0},fields:[{text:"ID",name:"id",sortable:!0},{text:"Title",name:"title",sortable:!0},{text:"Short description",name:"short_description",sortable:!0},{text:"Owner name",name:"owner_name",sortable:!0},{text:"Team emails",name:"team_emails",sortable:!1},{text:"Show in",name:"show_in",sortable:!0},{text:"Link",name:"link",sortable:!1}]}},props:{apiUrl:{required:!0,type:String},language:{required:!0,type:String},itemsPerPage:{required:!1,default:!1},common:{required:!0,type:Object}},mixins:[n.a,o.a,a.a,u.a],notifications:{getExperimentsPreviewNotification:{},getDashboardMixin:{}},methods:{setup:function(){this.isUserAuthenticatedMixin()&&(this.itemsPerPage&&(this.itemsPerPageDefault=this.itemsPerPage),this.selectedItemsPerPage=this.itemsPerPageDefault,this.getExperimentsPreview(this.apiUrl,this.language),this.getDashboard())},getExperimentsPreview:function(e,t,i){var s=this,r="";this.isUserAuthenticatedMixin()&&(r=this.getAuthorizationHeaderMixin()),this.getExperimentsPreviewMixin(e,t,i,r).then(function(e){s.debug("getExperimentsPreviewMixin response: "),s.debug(s.getResponseData(e)),s.responseStatus=s.setResponseStatus(s.responseStatus,e,"getExperimentsPreview"),e.hasOwnProperty("data")&&e.data.hasOwnProperty("previews")&&(s.experiments=e.data.previews,s.currentData=e.data.previews,s.sortData(s.sortField,!0),s.doPagination(1))},function(e){s.debug("getExperimentsPreviewMixin error: "),s.debug(s.getResponseMessage(e.response)),s.responseStatus=s.setResponseStatus(s.responseStatus,e.response,"getExperimentsPreview");var t=s.getErrorMessage(s,e.response);s.getExperimentsPreviewNotification({message:t,timeout:5e3,type:"error"})})},getDashboard:function(){var e=this;this.getDashboardMixin(this.apiUrl).then(function(t){e.debug("getDashboardMixin response: "),e.debug(e.getResponseData(t)),e.responseStatus=e.setResponseStatus(e.responseStatus,t,"getDashboard"),e.dashboardData=e.getResponseData(t)},function(t){e.debug("getDashboardMixin error: "),e.debug(e.getResponseMessage(t.response)),e.responseStatus=e.setResponseStatus(e.responseStatus,t.response,"getDashboard");var i=e.getErrorMessage(e,t.response);e.getDashboardMixin({message:i,timeout:5e3,type:"error"})})},sortData:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.sortable?(t||(e.name===this.sortField.name?this.sortField.direction="asc"===this.sortField.direction?"desc":"asc":this.sortField.direction="asc",this.sortField.name=e.name),"id"===e.name?this.sortExperimentsById(this.currentData,this.sortField.direction):"title"===e.name||"short_description"===e.name||"owner_name"===e.name?this.sortExperimentsByText(e,this.currentData,this.sortField.direction):"show_in"===e.name&&this.sortExperimentsByObjectLength(this.currentData,this.sortField.direction),this.doPagination(this.pagination.current_page)):this.debug("non sortable field")},sortExperimentsById:function(e,t){return e.sort(function(e,i){var s=parseInt(e.experiment_id),r=parseInt(i.experiment_id);return"desc"===t?s>r?-1:s<r?1:0:"asc"===t?s<r?-1:s>r?1:0:void this.debug("invalid sort order")})},sortExperimentsByText:function(e,t,i){return t.sort(function(t,s){var r="",n="";return"title"===e.name?(r=t.title,n=s.title):"short_description"===e.name?(r=t.short_description,n=s.short_description):"owner_name"===e.name&&(r=t.owner_name,n=s.owner_name),"desc"===i?r>n?-1:r<n?1:0:"asc"===i?r<n?-1:r>n?1:0:void this.debug("invalid sort order")})},sortExperimentsByObjectLength:function(e,t){return e.sort(function(e,i){var s=r()(e.show_in).length,n=r()(i.show_in).length;return"desc"===t?s>n?-1:s<n?1:0:"asc"===t?s<n?-1:s>n?1:0:void this.debug("invalid sort order")})},titleDescriptionOwnerFilter:function(e,t){return""!==t&&" "!==t?(this.debug("serching experiments by keyword: "+t),e.filter(function(e){var i=e.title.toLowerCase(),s=e.short_description.toLowerCase(),r=e.owner_name.toLowerCase();if(-1!==i.indexOf(t.toLowerCase())||-1!==s.indexOf(t.toLowerCase())||-1!==r.indexOf(t.toLowerCase()))return!0})):e},searchExperiments:function(){this.currentData=this.titleDescriptionOwnerFilter(this.experiments,this.searchTerm),this.sortData(this.sortField,!0),this.doPagination(1)},doPagination:function(e){e>0&&e<this.pagination.last_page+1?(this.offset=(e-1)*this.perPage,this.pagination.total=this.currentData.length,this.pagination.current_page=e,this.pagination.last_page=this.getNumberOfPages(this.currentData.length,this.perPage),this.pagination.from=this.offset+1,this.offset+this.perPage<this.currentData.length?this.pagination.to=this.offset+this.perPage:this.pagination.to=this.currentData.length,this.currentPage=this.sliceExperiments(this.currentData,this.offset,this.pagination.to)):this.debug("page out of range")},getNumberOfPages:function(e,t){return e>0?Math.ceil(e/t):1},sliceExperiments:function(e,t,i){return 0!==i?e.slice(t,i):e.slice(t)},getObjectKeys:function(e){if(e)return r()(e)}},computed:{perPage:function(){return this.itemsPerPageDefault}},created:function(){this.$root.eventBus.$on("login",function(){this.setup()}.bind(this)),this.$root.eventBus.$on("logout",function(){this.setup()}.bind(this))},watch:{selectedItemsPerPage:function(e){this.itemsPerPageDefault="all"===e?this.pagination.total:parseInt(e),this.doPagination(1)}},mounted:function(){this.showMountedMessage(this),this.setup()}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=i(1),n=i(21);t.default={name:"authorization",data:function(){return{profile:this.common.placeholders.profile,responseStatus:{}}},props:{apiUrl:{required:!0,type:String},common:{required:!0,type:Object}},mixins:[n.a,s.a,r.a],notifications:{loginNotification:{},profileNotification:{},registerNotification:{}},methods:{setup:function(){this.isUserAuthenticatedMixin()?this.getMyProfile(this.apiUrl):this.profile=this.common.placeholders.profile},login:function(e,t){var i=this,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.getUserTokenMixin(e,t).then(function(t){i.debug("getUserTokenMixin response: "),i.debug(i.getResponseData(t)),i.responseStatus=i.setResponseStatus(i.responseStatus,t,"getUserToken"),t.hasOwnProperty("data")&&t.data.hasOwnProperty("token")&&t.data.token.hasOwnProperty("string")&&i.processLogin(e,t.data.token.string,s);var r=i.getErrorMessage(i,{data:{status:"login_successful",message:"Login successful."}});i.loginNotification({message:r,timeout:5e3,type:"success"})},function(e){i.debug("getUserTokenMixin error: "),i.debug(i.getResponseMessage(e.response)),i.responseStatus=i.setResponseStatus(i.responseStatus,e.response,"getUserToken"),i.$root.eventBus.$emit("sign-in-failed");var t=i.getErrorMessage(i,e.response);i.loginNotification({message:t,timeout:5e3,type:"error"})})},processLogin:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s={string:t,timestamp:this.getTimestamp()};this.setLocalStorageObjectMixin("token",s),this.$root.eventBus.$emit("login"),i&&(this.debug("processLogin redirect: "+i),this.openUrl(i))},getMyProfile:function(e){var t=this,i=this.getAuthorizationHeaderMixin();this.getMyProfileMixin(e,i).then(function(e){t.debug("getMyProfileMixin response: "),t.debug(t.getResponseData(e)),t.responseStatus=t.setResponseStatus(t.responseStatus,e,"getMyProfile"),e.hasOwnProperty("data")&&e.data.hasOwnProperty("profile")&&(t.profile=e.data.profile);var i={user_id:e.data.profile.user_id,first_name:e.data.profile.first_name,last_name:e.data.profile.last_name,email:e.data.profile.email};t.setLocalStorageObjectMixin("userData",i),t.$root.eventBus.$emit("profile")},function(e){t.debug("getMyProfileMixin error: "),t.debug(t.getResponseMessage(e.response)),t.responseStatus=t.setResponseStatus(t.responseStatus,e.response,"getMyProfile");var i=t.getErrorMessage(t,e.response);t.profileNotification({message:i,timeout:5e3,type:"error"})})},register:function(e,t,i){var s=this;this.registerUserMixin(e,t).then(function(t){s.debug("registerUserMixin response: "),s.debug(s.getResponseData(t)),s.responseStatus=s.setResponseStatus(s.responseStatus,t,"registerUser"),t.hasOwnProperty("data")&&t.data.hasOwnProperty("token")&&t.data.token.hasOwnProperty("string")&&s.processLogin(e,t.data.token.string,i);var r=s.getErrorMessage(s,{data:{status:"registration_successful",message:"Registration successful."}});s.registerNotification({message:r,timeout:5e3,type:"success"})},function(e){s.debug("registerUserMixin error: "),s.debug(s.getResponseMessage(e.response)),s.responseStatus=s.setResponseStatus(s.responseStatus,e.response,"registerUser"),s.$root.eventBus.$emit("sign-up-failed");var t=s.getErrorMessage(s,e.response);s.registerNotification({message:t,timeout:5e3,type:"error"})})}},created:function(){this.$root.eventBus.$on("doLogin",function(e,t){this.login(this.apiUrl,e,t)}.bind(this)),this.$root.eventBus.$on("doLogout",function(e){this.logoutMixin(e);var t=this.getErrorMessage(this,{data:{status:"logout_successful",message:"Logout successful."}});this.registerNotification({message:t,timeout:5e3,type:"success"})}.bind(this)),this.$root.eventBus.$on("login",function(){this.setup()}.bind(this)),this.$root.eventBus.$on("logout",function(){this.setup()}.bind(this)),this.$root.eventBus.$on("doRegister",function(e,t){this.register(this.apiUrl,e,t)}.bind(this)),this.$root.eventBus.$on("doProfile",function(){this.getMyProfile(this.apiUrl)}.bind(this))},mounted:function(){this.showMountedMessage(this),this.setup()}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(34),r=i.n(s),n=i(11),o=i(2),a=i(1);t.default={name:"create-experiment",data:function(){return{responseStatus:{},experimentTitle:"",experimentShortDescription:"",experimentOwnerName:"",showErrors:!1,experimentId:null}},props:{apiUrl:{required:!0,type:String},language:{required:!0,type:String},experimentStage:{required:!0,type:String},experimentTag:{required:!1,type:String},languageKeyPrefix:{required:!1,type:String},redirectPath:{required:!1,type:String},common:{required:!0,type:Object}},mixins:[n.a,o.a,a.a],notifications:{createExperimentNotification:{},setTagsForExperimentNotification:{}},methods:{createExperiment:function(e,t){var i=this;this.$validator.validateAll().then(function(t){if(t){i.debug("create experiment form is valid");var s=i.getAuthorizationHeaderMixin(),n={stage:i.experimentStage},o=i.getErrorMessage(i,{data:{status:"creating_experiment",message:"Creating experiment"}});i.createExperimentNotification({message:o,timeout:5e3,type:"info"}),i.createExperimentMixin(e,n,s).then(function(t){i.debug("createExperimentMixin response: "),i.debug(i.getResponseData(t)),i.responseStatus=i.setResponseStatus(i.responseStatus,t,"createExperiment");var s={};if(i.languageKeyPrefix){var n;s.custom_language={};var o=i.languageKeyPrefix+"title",a=i.languageKeyPrefix+"short_description";s.custom_language=(n={},r()(n,o,{value:i.experimentTitle,format:"plaintext"}),r()(n,a,{value:i.experimentShortDescription,format:"plaintext"}),n)}else s.language={title:{value:i.experimentTitle},short_description:{value:i.experimentShortDescription},owner_name:{value:i.experimentOwnerName}};if(t.hasOwnProperty("data")&&t.data.hasOwnProperty("experiment")&&t.data.experiment.hasOwnProperty("experiment_id"))if(i.experimentId=t.data.experiment.experiment_id,i.experimentTag){var u={tags:[i.experimentTag]};i.setTagsForExperiment(e,i.experimentId,u,i.updateExperiment,s)}else i.updateExperiment(s)},function(e){i.debug("createExperimentMixin error: "),i.debug(i.getResponseMessage(e.response)),i.responseStatus=i.setResponseStatus(i.responseStatus,e.response,"createExperiment");var t=i.getErrorMessage(i,e.response);i.createExperimentNotification({message:t,timeout:5e3,type:"error"})})}else i.showErrors=!0,i.debug("create experiment form has errors")})},updateExperiment:function(e){this.languageKeyPrefix?this.updateExperimentCustomLanguage(this.apiUrl,this.experimentId,this.language,e):this.updateExperimentLanguage(this.apiUrl,this.experimentId,this.language,e)},updateExperimentLanguage:function(e,t,i,s){var r=this,n=this.getAuthorizationHeaderMixin();this.updateExperimentLanguageMixin(e,t,i,s,n).then(function(e){r.debug("updateExperimentLanguageMixin response: "),r.debug(r.getResponseData(e)),r.responseStatus=r.setResponseStatus(r.responseStatus,e,"updateExperimentLanguage"),""!==r.redirectPath&&r.openUrl(r.redirectPath+"/"+t)},function(e){r.debug("updateExperimentLanguageMixin error: "),r.debug(r.getResponseMessage(e.response)),r.responseStatus=r.setResponseStatus(r.responseStatus,e.response,"updateExperimentLanguage");var t=r.getErrorMessage(r,e.response);r.updateExperimentImageNotification({message:t,timeout:5e3,type:"error"})})},updateExperimentCustomLanguage:function(e,t,i,s){var r=this,n=this.getAuthorizationHeaderMixin();this.updateExperimentCustomLanguageMixin(e,t,i,s,n).then(function(e){r.debug("updateExperimentCustomLanguageMixin response: "),r.debug(r.getResponseData(e)),r.responseStatus=r.setResponseStatus(r.responseStatus,e,"updateExperimentCustomLanguage"),""!==r.redirectPath&&r.openUrl(r.redirectPath+"/"+t)},function(e){r.debug("updateExperimentCustomLanguageMixin error: "),r.debug(r.getResponseMessage(e.response)),r.responseStatus=r.setResponseStatus(r.responseStatus,e.response,"updateExperimentCustomLanguage");var t=r.getErrorMessage(r,e.response);r.updateExperimentImageNotification({message:t,timeout:5e3,type:"error"})})}},mounted:function(){this.showMountedMessage(this)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(21),r=i(2),n=i(1);t.default={name:"discourse-sso",data:function(){return{}},props:{apiUrl:{required:!0,type:String},discourseUrl:{required:!0,type:String},loginRedirect:{required:!0,type:String}},mixins:[s.a,r.a,n.a],methods:{setup:function(){var e=this;this.isUserAuthenticatedMixin()?this.getSSOAuthQueryString().then(function(t){e.redirectToDiscourse(t)}):this.openUrl(this.loginRedirect)},getParameterByName:function(e,t){t||(t=window.location.href),e=e.replace(/[[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),s=i.exec(t);return s?s[2]?decodeURIComponent(s[2].replace(/\+/g," ")):"":null},redirectToDiscourse:function(e){this.debug(this.discourseUrl+"/session/sso_login?"+e),window.location.href=this.discourseUrl+"/session/sso_login?"+e},getSSOAuthQueryString:function(){var e=this,t={sso:this.getParameterByName("sso"),sig:this.getParameterByName("sig")};return this.$http.post(this.apiUrl+"/users/sso/discourse/",t,{headers:{Authorization:this.getAuthorizationHeaderMixin()}}).then(function(t){if(t.hasOwnProperty("data")){if(t.data.hasOwnProperty("sso_string"))return t.data.sso_string}else e.debug("sso_string format error")},function(t){e.debug("error"),e.debug(t.response)})}},mounted:function(){this.showMountedMessage(this),this.setup()}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(11),r=i(2),n=i(1);t.default={name:"experiment-index",data:function(){return{experiment:this.common.placeholders.experiment_preview,experiments:[],searchTerm:"",filterOptions:[],sortOptionsObject:!1,currentSortObject:!1,currentSortOptionKey:!1,tagsForExperiments:[],responseStatus:{}}},props:{apiUrl:{required:!0,type:String},language:{required:!0,type:String},placeholderImageUrl:{required:!1,default:!1,type:String},getTeamMemberId:{required:!1,default:!1},getPlace:{required:!1,default:!1},getTag:{required:!1,default:!1},getStage:{required:!1,default:!1},getLimit:{required:!1,default:!1},getOffset:{required:!1,default:!1},showLimit:{required:!1,default:!1},showStages:{required:!1,default:!1},showExperimentIds:{required:!1,default:!1},sortExperimentsObject:{required:!1,type:Array},experimentsFilterArray:{required:!1,type:Array},common:{required:!0,type:Object}},mixins:[s.a,r.a,n.a],notifications:{getExperimentsPreviewNotification:{},getTagsForExperimentsNotification:{}},methods:{setup:function(){if(this.experimentsFilterArray&&0!==this.experimentsFilterArray.length)for(var e=0;e<this.experimentsFilterArray.length;e++){var t=this.experimentsFilterArray[e];t.selected=!1,this.filterOptions.push(t)}if(this.sortExperimentsObject&&(this.sortOptionsObject=this.sortExperimentsObject,0!==this.sortOptionsObject.length))for(var i=0;i<this.sortOptionsObject.length;i++)!0===this.sortOptionsObject[i].initial&&(this.$set(this,"currentSortObject",this.sortOptionsObject[i]),this.$set(this,"currentSortOptionKey",this.sortOptionsObject[i].key));var s=[];this.getTeamMemberId&&s.push({team_member_id:this.getTeamMemberId}),this.getPlace&&s.push({place:this.getPlace}),this.getTag&&s.push({tag:this.getTag}),this.getStage&&s.push({stage:this.getStage}),this.getLimit&&s.push({limit:this.getLimit}),this.getOffset&&s.push({offset:this.getOffset}),this.getExperimentsPreview(this.apiUrl,this.language,s),this.getTagsForExperiments(this.apiUrl,this.language)},getExperimentsPreview:function(e,t,i){var s=this;this.getExperimentsPreviewMixin(e,t,i).then(function(e){s.debug("getExperimentsPreviewMixin response: "),s.debug(s.getResponseData(e)),s.responseStatus=s.setResponseStatus(s.responseStatus,e,"getExperimentsPreview"),e.hasOwnProperty("data")&&e.data.hasOwnProperty("previews")&&(s.experiments=e.data.previews)},function(e){s.debug("getExperimentsPreviewMixin error: "),s.debug(s.getResponseMessage(e.response)),s.responseStatus=s.setResponseStatus(s.responseStatus,e.response,"getExperimentsPreview");var t=s.getErrorMessage(s,e.response);s.getExperimentsPreviewNotification({message:t,timeout:5e3,type:"error"})})},getTagsForExperiments:function(e,t){var i=this;this.getTagsForExperimentsMixin(e,t).then(function(e){i.debug("getTagsForExperimentsMixin response: "),i.debug(i.getResponseData(e)),i.responseStatus=i.setResponseStatus(i.responseStatus,e,"getTagsForExperiments"),e.hasOwnProperty("data")?e.data.hasOwnProperty("tags")&&(i.tagsForExperiments=e.data.tags):i.debug("hasOwnProperty(data.tags) error: ")},function(e){i.debug("getTagsForExperimentsMixin error: "),i.debug(i.getResponseMessage(e.response)),i.responseStatus=i.setResponseStatus(i.responseStatus,e.response,"getTagsForExperiments");var t=i.getErrorMessage(i,e.response);i.getTagsForExperimentsNotification({message:t,timeout:5e3,type:"error"})})},sliceExperiments:function(e,t,i){return 0!==parseInt(i)?(this.debug("filtering experiment quantity to: "+i),e.slice(t,i)):e.slice(t)},filterByStage:function(e,t){if(t){var i=t.split(",");return this.debug("filtering experiment stages to: "+t),e.filter(function(e){if("all"===t)return!0;for(var s=0;s<i.length;s++)if(parseInt(i[s].trim())===e.stage)return!0})}return e},filterById:function(e,t){if(t){var i=t.split(",");return this.debug("filtering experiment IDs to: "+t),e.filter(function(e){if("all"===t)return!0;for(var s=0;s<i.length;s++)if(i[s].trim()===e.experiment_id)return!0})}return e},keywordFilter:function(e,t){return""!==t&&" "!==t?(this.debug("serching experiments by keyword: "+t),e.filter(function(e){for(var i=e.title.toLowerCase(),s=e.short_description.toLowerCase(),r="",n=0;n<e.tags.length;n++)r+=e.tags[n].label+" ";if(-1!==i.indexOf(t.toLowerCase())||-1!==s.indexOf(t.toLowerCase())||-1!==r.indexOf(t.toLowerCase()))return!0})):e},searchExperiments:function(){this.keywordFilter(this.experiments,this.searchTerm)},sortExperiments:function(e){return this.currentSortObject?"likes"===this.currentSortObject.key?(this.debug("sorting by likes"),this.sortExperimentsByLikes(e)):"alphabetical"===this.currentSortObject.key?(this.debug("sorting by title"),this.sortExperimentsByTitle(e)):"id"===this.currentSortObject.key?(this.debug("sorting by ID"),this.sortExperimentsById(e)):void this.debug("unsupported sorting option"):e},sortExperimentsByLikes:function(e){return e.sort(function(e,t){var i=e.like_count,s=t.like_count;return i>s?-1:i<s?1:0})},sortExperimentsByTitle:function(e){return e.sort(function(e,t){var i=e.title,s=t.title;return i<s?-1:i>s?1:0})},sortExperimentsById:function(e){return e.sort(function(e,t){var i=parseInt(e.experiment_id),s=parseInt(t.experiment_id);return i>s?-1:i<s?1:0})},triggerSort:function(e){if(0!==this.sortOptionsObject.length)for(var t=0;t<this.sortOptionsObject.length;t++)e.key===this.sortOptionsObject[t].key&&this.$set(this,"currentSortObject",this.sortOptionsObject[t])},filterOptionsContain:function(e){if(!this.filterOptions)return!1;if(this.filterOptions.length>0)for(var t=0;t<this.filterOptions.length;t++)if(this.filterOptions[t].key===e)return this.filterOptions[t].selected}},computed:{placeholderImage:function(){return this.placeholderImageUrl?this.placeholderImageUrl:this.common.placeholders.defaultPlaceholderImageUrl},sortOptions:function(){return this.sortOptionsObject},getTagLabelFromId:function(){for(var e=0;e<this.tagsForExperiments.length;e++)if(this.tagsForExperiments[e].id===parseInt(this.getTag))return this.tagsForExperiments[e].label}},mounted:function(){this.showMountedMessage(this),this.setup()}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(1),r=i(11),n=i(64);i.n(n);t.default={name:"experiment-map",data:function(){return{center:{},cluster:!1,markers:[],infoName:"",infoContent:[],infoWindowPos:{lat:0,lng:0},infoWinOpen:!1,currentMidx:null,infoOptions:{pixelOffset:{width:0,height:-40}}}},props:{experiments:{required:!0,type:Array},googleMapsApiKey:{required:!0,type:String},experimentGeocodedLocations:{required:!0,type:Array},mapCenter:{required:!0,type:Object}},mixins:[r.a,s.a],methods:{setup:function(){this.center=this.mapCenter,i.i(n.load)({key:this.googleMapsApiKey})},setMarkers:function(){this.markers=[],this.infoWinOpen=!1;for(var e=0;e<this.experiments.length;e++)if(null!==this.experiments[e].geographic_location){var t=!1;if(this.markers.length>0)for(var i=0;i<this.markers.length;i++)this.markers[i].name===this.experiments[e].geographic_location&&(t=!0,this.setMarkerContent(this.markers[i].content,this.experiments[e].experiment_id,this.experiments[e].title,this.experiments[e].short_description));if(!t)for(var s=0;s<this.experimentGeocodedLocations.length;s++)if(this.experimentGeocodedLocations[s][0]===this.experiments[e].geographic_location){var r={name:this.experimentGeocodedLocations[s][0],content:[{id:this.experiments[e].experiment_id,title:this.experiments[e].title,description:this.experiments[e].short_description}],position:{lat:parseFloat(this.experimentGeocodedLocations[s][1]),lng:parseFloat(this.experimentGeocodedLocations[s][2])}};this.markers.push(r)}}},toggleInfoWindow:function(e,t){this.infoWindowPos=e.position,this.infoName=e.name,this.infoContent=e.content,this.currentMidx===t?this.infoWinOpen=!this.infoWinOpen:(this.infoWinOpen=!0,this.currentMidx=t)},setMarkerContent:function(e,t,i,s){e.push({id:t,title:i,description:s})}},computed:{placeholderImage:function(){return this.placeholderImageUrl?this.placeholderImageUrl:null}},watch:{experiments:function(e,t){this.setMarkers()}},mounted:function(){this.showMountedMessage(this),this.setup()}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(37),r=i.n(s),n=i(34),o=i.n(n),a=i(22),u=i.n(a),d=i(139),p=i.n(d),g=i(11),l=i(71),h=i(2),c=i(1);t.default={name:"experiment-page",data:function(){return{responseStatus:{},experiment:this.common.placeholders.experiment,myRelationships:[],experimentLinks:[],showSpindle:!1,imageLoaded:!1,selectedExperimentStage:null,experimentLocation:"",displayedExperimentStage:null,imageBody:null,uploadImageNotification:null,experimentTitle:"",experimentShortDescription:"",tagsForExperiments:[],editExperimentStage:!1,editExperimentShowIn:!1,editExperimentDisabled:!1,editExperimentFunding:!1,editExperimentLinks:!1,editExperimentLocation:!1,selectedExperimentDisabled:null,selectedExperimentShowIn:{},experimentDisabledAgree:!1,experimentFundingCrowdRaised:0,experimentFundingCrowdStage:null,experimentFunding:{goal:null,currency:null,sources:{crowd:{api:null,campaign_id:null},state:{raised:null},organizations:{raised:null}}},showFundingErrors:!1}},props:{apiUrl:{required:!0,type:String},language:{required:!0,type:String},experimentId:{required:!0,type:String},placeholderImageUrl:{required:!1,default:!1},cachedData:{required:!1,default:!1},experimentLocations:{required:!1,type:Array},common:{required:!0,type:Object}},mixins:[g.a,l.a,h.a,c.a],notifications:{getExperimentNotification:{},updateExperimentNotification:{},updateExperimentSettingsNotification:{},updateExperimentImageNotification:{},getTagsForExperimentsNotification:{},updateExperimentFundingNotification:{},goToTheNextStageNotification:{},setExperimentLinksNotification:{},setTagsForExperimentNotification:{}},methods:{setup:function(){if(this.cachedData)try{var e=JSON.parse(this.cachedData);e.status&&("not_found"===e.status?(this.debug("error in cached data:"),e.message&&(this.debug(e.message),this.experiment=null)):this.setInitialValues(e))}catch(e){this.debug("cachedData not JSON"),this.debug("error: "+e)}this.getExperiment(this.apiUrl,this.experimentId,this.language)},setInitialValues:function(e){var t=e.experiment;this.experiment=t,this.selectedExperimentStage=parseInt(t.stage),this.displayedExperimentStage=parseInt(t.stage),t.show_in||this.$set(t,"show_in",{}),this.selectedExperimentShowIn=p()({},t.show_in),this.selectedExperimentDisabled=t.disabled,t.funding&&(t.funding.goal&&(this.experimentFunding.goal=t.funding.goal),t.funding.currency&&(this.experimentFunding.currency=t.funding.currency),t.funding.sources&&(t.funding.sources.crowd&&(t.funding.sources.crowd.campaign_id&&(this.experimentFunding.sources.crowd.campaign_id=t.funding.sources.crowd.campaign_id),t.funding.sources.crowd.api&&(this.experimentFunding.sources.crowd.api=t.funding.sources.crowd.api)),t.funding.sources.organizations&&void 0!==t.funding.sources.organizations.raised&&(this.experimentFunding.sources.organizations.raised=t.funding.sources.organizations.raised),t.funding.sources.state&&void 0!==t.funding.sources.state.raised&&(this.experimentFunding.sources.state.raised=t.funding.sources.state.raised)));var i=e.my_relationships;this.myRelationships=i;var s=e.acl;this.acl=s,this.setUserAcl(),this.experimentLinks=JSON.parse(u()(t.links)),this.experimentLocation=t.geographic_location},getExperiment:function(e,t,i){var s=this;if(this.isUserAuthenticatedMixin()){this.debug("Authorization header: "+this.getAuthorizationHeaderMixin());var r=this.getAuthorizationHeaderMixin()}this.getExperimentMixin(e,t,i,r).then(function(t){s.debug("getExperimentMixin response: "),s.debug(s.getResponseData(t)),s.responseStatus=s.setResponseStatus(s.responseStatus,t,"getExperiment"),t.hasOwnProperty("data")&&t.data.hasOwnProperty("status")&&("not_found"===t.data.status?(s.debug("error fetching experiment:"),t.data.status.hasOwnProperty("message")&&s.debug(t.data.message),s.experiment=null):s.setInitialValues(t.data)),s.isUserEditorMixin()&&s.getTagsForExperiments(e,i)},function(e){s.debug("getExperimentMixin error: "),s.debug(s.getResponseMessage(e.response)),s.responseStatus=s.setResponseStatus(s.responseStatus,e.response,"getExperiment");var t=s.getErrorMessage(s,e.response);s.getExperimentNotification({message:t,timeout:5e3,type:"error"})})},getTagsForExperiments:function(e,t){var i=this;this.getTagsForExperimentsMixin(e,t).then(function(e){i.debug("getTagsForExperimentsMixin response: "),i.debug(i.getResponseData(e)),i.responseStatus=i.setResponseStatus(i.responseStatus,e,"getTagsForExperiments"),e.hasOwnProperty("data")?e.data.hasOwnProperty("tags")&&(i.tagsForExperiments=e.data.tags):i.debug("hasOwnProperty(data.tags) error: ")},function(e){i.debug("getTagsForExperimentsMixin error: "),i.debug(i.getResponseMessage(e.response)),i.responseStatus=i.setResponseStatus(i.responseStatus,e.response,"getTagsForExperiments");var t=i.getErrorMessage(i,e.response);i.getTagsForExperimentsNotification({message:t,timeout:5e3,type:"error"})})},updateExperimentImage:function(e){var t=this;if(this.imageBody){var i=this.getErrorMessage(this,{data:{status:"saving_image",message:"Saving image."}});this.updateExperimentImageNotification({message:i,timeout:5e3,type:"info"});var s=this.getAuthorizationHeaderMixin();this.uploadImageFileMixin(this.apiUrl,this.imageBody,s).then(function(i){if(t.debug("uploadImageFileMixin response: "),t.debug(t.getResponseData(i)),t.responseStatus=t.setResponseStatus(t.responseStatus,i,"uploadImageFile"),i.hasOwnProperty("data")&&i.data.hasOwnProperty("image")&&i.data.image.hasOwnProperty("filename"))var s={image_collection:o()({},e,{filename:i.data.image.filename})};t.imageBody=null,t.updateExperimentImageCollection(t.apiUrl,t.experiment.experiment_id,s);var r=t.getErrorMessage(t,{data:{status:"image_saved",message:"Image saved."}});t.updateExperimentImageNotification({message:r,timeout:5e3,type:"success"})},function(e){t.debug("uploadImageFileMixin error: "),t.debug(t.getResponseMessage(e.response)),t.responseStatus=t.setResponseStatus(t.responseStatus,e.response,"uploadImageFile");var i=t.getErrorMessage(t,e.response);t.updateExperimentImageNotification({message:i,timeout:5e3,type:"error"})})}},updateExperimentSettings:function(e,t,i){var s=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=this.getAuthorizationHeaderMixin();this.updateExperimentSettingsMixin(e,t,i,n).then(function(i){s.debug("updateExperimentSettingsMixin response: "),s.debug(s.getResponseData(i)),s.responseStatus=s.setResponseStatus(s.responseStatus,i,"updateExperimentSettings"),r&&s.getExperiment(e,t,s.language)},function(e){s.debug("updateExperimentSettingsMixin error: "),s.debug(s.getResponseMessage(e.response)),s.responseStatus=s.setResponseStatus(s.responseStatus,e.response,"updateExperimentSettings");var t=s.getErrorMessage(s,e.response);s.updateExperimentSettingsNotification({message:t,timeout:5e3,type:"error"})})},updateExperimentImageCollection:function(e,t,i){var s=this,r=this.getAuthorizationHeaderMixin();this.updateExperimentImageCollectionMixin(e,t,i,r).then(function(i){s.debug("updateExperimentImageCollectionMixin response: "),s.debug(s.getResponseData(i)),s.responseStatus=s.setResponseStatus(s.responseStatus,i,"updateExperimentImageCollection"),s.experiment.image_collection={},s.showSpindle=!0,s.getExperiment(e,t,s.language)},function(e){s.debug("updateExperimentImageCollectionMixin error: "),s.debug(s.getResponseMessage(e.response)),s.responseStatus=s.setResponseStatus(s.responseStatus,e.response,"updateExperimentImageCollection");var t=s.getErrorMessage(s,e.response);s.updateExperimentImageNotification({message:t,timeout:5e3,type:"error"})})},updateExperimentLanguage:function(e,t,i,s){var r=this,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.getAuthorizationHeaderMixin();this.updateExperimentLanguageMixin(e,t,i,s,o).then(function(s){r.debug("updateExperimentLanguageMixin response: "),r.debug(r.getResponseData(s)),r.responseStatus=r.setResponseStatus(r.responseStatus,s,"updateExperimentLanguage"),n&&r.getExperiment(e,t,i)},function(e){r.debug("updateExperimentLanguageMixin error: "),r.debug(r.getResponseMessage(e.response)),r.responseStatus=r.setResponseStatus(r.responseStatus,e.response,"updateExperimentLanguage");var t=r.getErrorMessage(r,e.response);r.updateExperimentImageNotification({message:t,timeout:5e3,type:"error"})})},updateExperimentCustomLanguage:function(e,t,i,s){var r=this,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.getAuthorizationHeaderMixin();this.updateExperimentCustomLanguageMixin(e,t,i,s,o).then(function(s){r.debug("updateExperimentCustomLanguageMixin response: "),r.debug(r.getResponseData(s)),r.responseStatus=r.setResponseStatus(r.responseStatus,s,"updateExperimentCustomLanguage"),n&&r.getExperiment(e,t,i)},function(e){r.debug("updateExperimentCustomLanguageMixin error: "),r.debug(r.getResponseMessage(e.response)),r.responseStatus=r.setResponseStatus(r.responseStatus,e.response,"updateExperimentCustomLanguage");var t=r.getErrorMessage(r,e.response);r.updateExperimentImageNotification({message:t,timeout:5e3,type:"error"})})},updateExperimentFunding:function(e,t,i){var s=this,r=this.getAuthorizationHeaderMixin();this.updateExperimentFundingMixin(e,t,i,r).then(function(e){s.debug("updateExperimentFundingMixin response: "),s.debug(s.getResponseData(e)),s.responseStatus=s.setResponseStatus(s.responseStatus,e,"updateExperimentFunding")},function(e){s.debug("updateExperimentFundingMixin error: "),s.debug(s.getResponseMessage(e.response)),s.responseStatus=s.setResponseStatus(s.responseStatus,e.response,"updateExperimentFunding");var t=s.getErrorMessage(s,e.response);s.updateExperimentFundingNotification({message:t,timeout:5e3,type:"error"})})},addExperimentLike:function(e,t){var i=this,s=this.getAuthorizationHeaderMixin();this.addExperimentLikeMixin(e,t,s).then(function(e){i.debug("addExperimentLikeMixin response: "),i.debug(i.getResponseData(e)),i.responseStatus=i.setResponseStatus(i.responseStatus,e,"addExperimentLike"),i.experiment.hasOwnProperty("like_count")?i.experiment.like_count+=1:i.experiment.like_count=1,i.myRelationships.push("like"),i.debug("adding a like")},function(e){i.debug("addExperimentLikeMixin error: "),i.debug(i.getResponseMessage(e.response)),i.responseStatus=i.setResponseStatus(i.responseStatus,e.response,"addExperimentLike");var t=i.getErrorMessage(i,e.response);i.addExperimentLikeMixinNotification({message:t,timeout:5e3,type:"error"})})},removeExperimentLike:function(e,t){var i=this,s=this.getAuthorizationHeaderMixin();this.removeExperimentLikeMixin(e,t,s).then(function(e){i.debug("removeExperimentLikeMixin response: "),i.debug(i.getResponseData(e)),i.responseStatus=i.setResponseStatus(i.responseStatus,e,"removeExperimentLike"),i.experiment.like_count-=1;for(var t=0;t<i.myRelationships.length;t++)if("like"===i.myRelationships[t]){i.debug("Removing relationship: "+i.myRelationships[t]);var s=i.myRelationships.indexOf(i.myRelationships[t]);i.myRelationships.splice(s,1)}i.debug("removing a like")},function(e){i.debug("removeExperimentLikeMixin error: "),i.debug(i.getResponseMessage(e.response)),i.responseStatus=i.setResponseStatus(i.responseStatus,e.response,"removeExperimentLike");var t=i.getErrorMessage(i,e.response);i.addExperimentLikeMixinNotification({message:t,timeout:5e3,type:"error"})})},onImageLoad:function(){this.debug("image loaded"),this.showSpindle=!1,this.imageLoaded=!0},getLanguage:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t?this.experiment.language&&this.experiment.language[e]?i?this.experiment.language[e].html:this.experiment.language[e].value:null:this.experiment.custom_language&&this.experiment.custom_language[e]?i?this.experiment.custom_language[e].html:this.experiment.custom_language[e].value:null},goToTheNextStage:function(e,t){var i=this,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(s)var n=window.confirm(s);else n=window.confirm("You are about to move to the next stage of the experiment, are you sure?");if(n){var o=this.getAuthorizationHeaderMixin();this.moveExperimentToNextStageMixin(e,t,o).then(function(s){if(i.debug("moveExperimentToNextStageMixin response: "),i.debug(i.getResponseData(s)),i.responseStatus=i.setResponseStatus(i.responseStatus,s,"goToTheNextStage"),i.getExperiment(e,t,i.language),r)var n=r;else n="Experiment moved to the next stage.";i.goToTheNextStageNotification({message:n,timeout:5e3,type:"success"})},function(e){i.debug("moveExperimentToNextStageMixin error: "),i.debug(i.getResponseMessage(e.response)),i.responseStatus=i.setResponseStatus(i.responseStatus,e.response,"goToTheNextStage");var t=i.getErrorMessage(i,e.response);i.goToTheNextStageNotification({message:t,timeout:5e3,type:"error"})})}else this.debug("must confirm to go to the next stage")},updateExperimentStage:function(e,t,i){if(i!==parseInt(this.experiment.stage)){var s={settings:{stage:i.toString()}};this.experiment.stage=s.settings.stage,this.displayedExperimentStage=s.settings.stage,this.editExperimentStage=!1,this.updateExperimentSettings(e,t,s,!0)}else this.debug("experiment stage not changed")},updateExperimentShowIn:function(e,t){if(this.isShowInModified){var i={settings:{show_in:this.selectedExperimentShowIn}};this.experiment.show_in=p()({},this.selectedExperimentShowIn),this.editExperimentShowIn=!1,this.updateExperimentSettings(e,t,i)}else this.debug("experiment show in not changed")},updateExperimentDisabled:function(e,t,i){if(this.isDisabledAgreed){var s={settings:{disabled:!0}};this.experiment.disabled=!0,this.experimentDisabledAgree=!1,this.editExperimentDisabled=!1;window.confirm("Are you sure that you want to DELETE this experiment?")?this.updateExperimentSettings(t,i,s,!0):this.debug("must confirm to disable the experiment")}else this.debug("must agree to disable the experiment")},updateExperimentGoals:function(e,t){var i=this;this.$validator.validateAll().then(function(s){if(s)if(i.debug("update funding form is valid"),i.experimentFundingModified){var n={},o={};i.experimentFundingOrganizationsRaisedModified&&(n.hasOwnProperty("sources")||(n.sources={}),-1===r()(n.sources).length?n.sources={organizations:{}}:n.sources.hasOwnProperty("organizations")||(n.sources.organizations={}),n.sources.organizations.raised=i.experimentFunding.sources.organizations.raised),i.experimentFundingStateRaisedModified&&(n.hasOwnProperty("sources")||(n.sources={}),-1===r()(n.sources).length?n.sources={state:{}}:n.sources.hasOwnProperty("state")||(n.sources.state={}),n.sources.state.raised=i.experimentFunding.sources.state.raised),i.experimentFundingCrowdCampaignIdModified&&(o.campaign_id=i.experimentFunding.sources.crowd.campaign_id),i.experimentFundingCrowdCampaignIdModified&&(o.api=i.experimentFunding.sources.crowd.api),i.experimentFundingGoalModified&&(n.goal=i.experimentFunding.goal),i.experimentFundingCurrencyModified&&(n.currency=i.experimentFunding.currency),r()(o).length>0&&(n.hasOwnProperty("sources")?n.sources.hasOwnProperty("crowd")||(n.sources.crowd={}):n.sources={crowd:{}},n.sources.crowd=p()({},n.sources.crowd,o)),n.hasOwnProperty("sources")&&(n.sources.hasOwnProperty("state")&&(-1===r()(i.experiment.funding.sources).length&&(i.experiment.funding.sources={}),i.experiment.funding.sources.hasOwnProperty("state")||(i.experiment.funding.sources.state={}),i.experiment.funding.sources.state.raised=i.experimentFunding.sources.state.raised),n.sources.hasOwnProperty("organizations")&&(-1===r()(i.experiment.funding.sources).length&&(i.experiment.funding.sources={}),i.experiment.funding.sources.hasOwnProperty("organizations")||(i.experiment.funding.sources.organizations={}),i.experiment.funding.sources.organizations.raised=i.experimentFunding.sources.organizations.raised),n.sources.hasOwnProperty("crowd")&&(-1===r()(i.experiment.funding.sources).length&&(i.experiment.funding.sources={}),i.experiment.funding.sources.crowd=p()({},i.experiment.funding.sources.crowd,i.experimentFunding.sources.crowd),n.sources.crowd.hasOwnProperty("campaign_id")&&i.$nextTick(function(){i.$root.eventBus.$emit("campaign-id-updated")}))),n.hasOwnProperty("goal")&&(i.experiment.funding.goal=i.experimentFunding.goal),n.hasOwnProperty("currency")&&(i.experiment.funding.currency=i.experimentFunding.currency),i.editExperimentFunding=!1,i.updateExperimentFunding(e,t,n)}else i.debug("update funding form not modified");else i.showFundingErrors=!0,i.debug("update funding form has errors")})},setExperimentLinks:function(e,t,i,s){var r=this,n=this.getAuthorizationHeaderMixin();this.setExperimentLinksMixin(e,t,i,n).then(function(n){r.debug("setExperimentLinksMixin response: "),r.debug(r.getResponseData(n)),r.responseStatus=r.setResponseStatus(r.responseStatus,n,"setExperimentLinks"),r.experimentLinks=JSON.parse(u()(i)),r.getExperiment(e,t,s)},function(e){r.debug("setExperimentLinksMixin error: "),r.debug(r.getResponseMessage(e.response)),r.responseStatus=r.setResponseStatus(r.responseStatus,e.response,"setExperimentLinks");var t=r.getErrorMessage(r,e.response);r.setExperimentLinksNotification({message:t,timeout:5e3,type:"error"})})},saveExperimentLinks:function(e,t){var i=this;this.$validator.validateAll("experiment-links-form").then(function(s){if(s){i.debug("experiment links form is valid");var r={};if(i.areExperimentLinksModified){for(var n=[],o=0;o<i.experimentLinks.length;o++)if(""!==i.experimentLinks[o].url||""!==i.experimentLinks[o].title){var a={url:i.experimentLinks[o].url,title:i.experimentLinks[o].title};n.push(a)}r.links=n,i.setExperimentLinks(e,t,r,i.language),i.editExperimentLinks=!1}else i.debug("experiment links form not modified")}else i.showExperimentLinksErrors=!0,i.debug("experiment links form has errors")})},saveExperimentLocation:function(e,t){if(this.isExperimentLocationModified){var i={settings:{geographic_location:this.experimentLocation}};this.experiment.geographic_location=this.experimentLocation,this.updateExperimentSettings(e,t,i),this.editExperimentLocation=!1}else this.debug("experiment location form not modified")},experimentLanguageUpdated:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.debug("experimentLanguageUpdated"),t)this.experiment.custom_language=p()({},this.experiment.custom_language,e.custom_language),this.updateExperimentCustomLanguage(this.apiUrl,this.experiment.experiment_id,this.language,e,i);else{this.experiment.language||(this.experiment.language={});for(var s in e.language)e.language.hasOwnProperty(s)&&this.$set(this.experiment.language,s,e.language[s]);this.updateExperimentLanguage(this.apiUrl,this.experiment.experiment_id,this.language,e,i)}},experimentTagsAdded:function(e,t){this.debug("adding tags to experiment"),this.debug(e),this.debug(t),this.experiment.tags=[];for(var i=0;i<e.length;i++)this.experiment.tags.push(e[i]);var s={tags:t};this.setTagsForExperiment(this.apiUrl,this.experiment.experiment_id,s)},setImage:function(e){this.imageBody=e},resetStage:function(){this.editExperimentStage=!1,this.selectedExperimentStage=this.experiment.stage},initializeShowInEditor:function(){!1===this.editExperimentShowIn&&(this.editExperimentShowIn=!0)},initializeDisabledEditor:function(){!1===this.editExperimentDisabled&&(this.editExperimentDisabled=!0)},initializeFundingEditor:function(){!1===this.editExperimentFunding&&(this.editExperimentFunding=!0)},initializeLinksEditor:function(){!1===this.editExperimentLinks&&(this.editExperimentLinks=!0)},initializeLocationEditor:function(){!1===this.editExperimentLocation&&(this.editExperimentLocation=!0)},resetShowIn:function(){this.editExperimentShowIn=!1,this.selectedExperimentShowIn=p()({},this.experiment.show_in)},resetDisabled:function(){this.editExperimentDisabled=!1,this.experimentDisabledAgree=!1},resetFunding:function(){!0===this.editExperimentFunding&&(this.editExperimentFunding=!1,this.experiment.hasOwnProperty("funding")&&(this.experiment.funding.hasOwnProperty("goal")&&(this.experimentFunding.goal=this.experiment.funding.goal),this.experiment.funding.hasOwnProperty("currency")&&(this.experimentFunding.currency=this.experiment.funding.currency),this.experiment.funding.hasOwnProperty("sources")&&(this.experiment.funding.sources.hasOwnProperty("crowd")&&(this.experiment.funding.sources.crowd.hasOwnProperty("campaign_id")&&(this.experimentFunding.sources.crowd.campaign_id=this.experiment.funding.sources.crowd.campaign_id),this.experiment.funding.sources.crowd.hasOwnProperty("api")&&(this.experimentFunding.sources.crowd.api=this.experiment.funding.sources.crowd.api)),this.experiment.funding.sources.hasOwnProperty("organizations")&&this.experiment.funding.sources.organizations.hasOwnProperty("raised")&&(this.experimentFunding.sources.organizations.raised=this.experiment.funding.sources.organizations.raised),this.experiment.funding.sources.hasOwnProperty("state")&&this.experiment.funding.sources.state.hasOwnProperty("raised")&&(this.experimentFunding.sources.state.raised=this.experiment.funding.sources.state.raised))),this.showFundingErrors=!1,this.errors.clear())},resetLocationEditor:function(){!0===this.editExperimentLocation&&(this.editExperimentLocation=!1,this.isExperimentLocationModified&&(this.experimentLocation=this.experiment.geographic_location))},resetLinksEditor:function(){!0===this.editExperimentLinks&&(this.editExperimentLinks=!1,this.areExperimentLinksModified&&(this.experimentLinks=JSON.parse(u()(this.experiment.links))))},sortShowInByKey:function(e){var t={};return r()(e).sort().forEach(function(i){t[i]=e[i]}),t},toggleShowIn:function(e,t){var i=e.target.checked;this.experiment.show_in.hasOwnProperty(t)||this.$set(this.experiment.show_in,t,!1),this.$set(this.selectedExperimentShowIn,t,i)},openFundingPage:function(e,t,i){t?this.openUrl(e+t+i,!0):this.debug("campaign id not defined")},organizationsRaised:function(){return this.experiment.funding&&this.experiment.funding.sources&&this.experiment.funding.sources.organizations&&this.experiment.funding.sources.organizations.raised?this.experiment.funding.sources.organizations.raised:0},stateRaised:function(){return this.experiment.funding&&this.experiment.funding.sources&&this.experiment.funding.sources.state&&this.experiment.funding.sources.state.raised?this.experiment.funding.sources.state.raised:0},crowdRaised:function(){return this.experimentFundingCrowdRaised},likeExperiment:function(){this.isUserAuthenticatedMixin()?this.userLiked?this.removeExperimentLike(this.apiUrl,this.experiment.experiment_id):this.addExperimentLike(this.apiUrl,this.experiment.experiment_id):(this.debug("not logged in"),this.$root.eventBus.$emit("showModal","sign-in",!0))},addExperimentLinkField:function(){var e={url:"",title:""};this.experimentLinks.push(e)},removeExperimentLinkField:function(e){this.experimentLinks.splice(e,1)}},computed:{placeholderImage:function(){return this.placeholderImageUrl?this.placeholderImageUrl:this.common.placeholders.defaultPlaceholderImageUrl},isShowInModified:function(){return this.experiment.show_in=this.sortShowInByKey(this.experiment.show_in),this.selectedExperimentShowIn=this.sortShowInByKey(this.selectedExperimentShowIn),u()(this.experiment.show_in)!==u()(this.selectedExperimentShowIn)},isDisabledAgreed:function(){return this.experimentDisabledAgree},experimentFundingOrganizationsRaisedModified:function(){var e=null;return null!==this.experimentFunding.sources.organizations.raised&&(this.experiment.hasOwnProperty("funding")&&this.experiment.funding.hasOwnProperty("sources")&&this.experiment.funding.sources.hasOwnProperty("organizations")&&(e=this.experiment.funding.sources.organizations.raised),e!==this.experimentFunding.sources.organizations.raised)},experimentFundingStateRaisedModified:function(){var e=null;return null!==this.experimentFunding.sources.state.raised&&(this.experiment.hasOwnProperty("funding")&&this.experiment.funding.hasOwnProperty("sources")&&this.experiment.funding.sources.hasOwnProperty("state")&&(e=this.experiment.funding.sources.state.raised),e!==this.experimentFunding.sources.state.raised)},experimentFundingCrowdCampaignIdModified:function(){var e=null;return null!==this.experimentFunding.sources.crowd.campaign_id&&(this.experiment.hasOwnProperty("funding")&&this.experiment.funding.hasOwnProperty("sources")&&this.experiment.funding.sources.hasOwnProperty("crowd")&&(e=this.experiment.funding.sources.crowd.campaign_id),e!==this.experimentFunding.sources.crowd.campaign_id&&""!==this.experimentFunding.sources.crowd.campaign_id)},experimentFundingCrowdApiUrlModified:function(){var e=null;return null!==this.experimentFunding.sources.crowd.api&&void 0!==this.experimentFunding.sources.crowd.api&&(this.experiment.hasOwnProperty("funding")&&this.experiment.funding.hasOwnProperty("sources")&&this.experiment.funding.sources.hasOwnProperty("crowd")&&(e=this.experiment.funding.sources.crowd.api),e!==this.experimentFunding.sources.crowd.api)},experimentFundingGoalModified:function(){var e=null;return null!==this.experimentFunding.goal&&(this.experiment.hasOwnProperty("funding")&&this.experiment.funding.hasOwnProperty("goal")&&(e=this.experiment.funding.goal),e!==this.experimentFunding.goal&&""!==this.experimentFunding.goal)},experimentFundingCurrencyModified:function(){var e=null;return null!==this.experimentFunding.goal&&(this.experiment.hasOwnProperty("funding")&&this.experiment.funding.hasOwnProperty("currency")&&(e=this.experiment.funding.currency),e!==this.experimentFunding.currency)},experimentFundingModified:function(){return!!(this.experimentFundingOrganizationsRaisedModified||this.experimentFundingStateRaisedModified||this.experimentFundingCrowdCampaignIdModified||this.experimentFundingCrowdApiUrlModified||this.experimentFundingGoalModified||this.experimentFundingCurrencyModified)},experimentRaised:function(){return this.crowdRaised()+parseInt(this.stateRaised())+parseInt(this.organizationsRaised())},raisedPercent:function(){return this.experiment.funding.goal?Math.round(this.experimentRaised/this.experiment.funding.goal*100):0},likeCount:function(){return this.experiment.hasOwnProperty("like_count")?this.experiment.like_count:0},userLiked:function(){for(var e=0;e<this.myRelationships.length;e++)if("like"===this.myRelationships[e])return!0;return!1},areExperimentLinksModified:function(){if(this.experiment.hasOwnProperty("links")&&0!==this.experiment.links.length)return u()(this.experiment.links)!==u()(this.experimentLinks);if(0!==this.experimentLinks.length)for(var e=0;e<this.experimentLinks.length;e++)if(""!==this.experimentLinks[e].url||""!==this.experimentLinks[e].title)return!0;return!1},isExperimentLocationModified:function(){return this.experiment.geographic_location!==this.experimentLocation&&void 0!==this.experimentLocation}},created:function(){this.$root.eventBus.$on("login",function(){this.setup()}.bind(this)),this.$root.eventBus.$on("logout",function(){this.setup()}.bind(this)),this.$root.eventBus.$on("crowdfunding:connected",function(e,t){e&&(this.experimentFundingCrowdStage=e),t&&(this.experimentFundingCrowdRaised=t)}.bind(this))},watch:{selectedExperimentStage:function(e){"string"==typeof this.selectedExperimentStage&&(this.selectedExperimentStage=parseInt(this.selectedExperimentStage))}},mounted:function(){this.showMountedMessage(this),this.setup()}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(1);t.default={data:function(){return{showEditor:!1,imageData:null}},props:{identifier:{required:!1,default:!1}},mixins:[s.a],notifications:{setImageNotification:{}},methods:{verifyImage:function(e){var t=this;this.$validator.validateAll().then(function(i){if(i&&e.target.files[0]){var s=e.target.files[0];t.debug("image is valid"),t.imageData=new window.FormData,t.imageData.append("file",s),t.identifier?t.$emit("set-image",t.imageData,t.identifier):t.$emit("set-image",t.imageData)}else t.debug("image has errors"),e.target.value=null,t.imageData=null,t.identifier?t.$emit("set-image",t.imageData,t.identifier):t.$emit("set-image",t.imageData),t.setImageNotification({message:t.errors.first("image"),timeout:5e3,type:"error"})})},uploadImage:function(e){this.imageData?(this.showEditor=!1,this.imageData=null,this.$emit("upload-image",e)):this.debug("no image selected")},resetImage:function(){this.imageData=null,this.showEditor=!1,this.$refs.imageFile.value=null}},mounted:function(){this.showMountedMessage(this)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=i(1),n=i(79),o=i.n(n);t.default={name:"leiki-testbed",data:function(){return{searchTermCategories:"",searchTermResults:"",categories:[],results:[],tags:[],leikiCategoryUrl:"https://kiwi53.leiki.com/focus/api?method=searchcategories&apikey=eb426404-1a17-4a1f-ac26-d2b2f32d07c3&autocomplete=occurred&categoryCounterID=2",leikiResultUrl:"https://kiwi53.leiki.com/focus/api?method=searchc&apikey=eb426404-1a17-4a1f-ac26-d2b2f32d07c3&instancesearch&partialsearchpriority=ontology&sourceallmatch",leikiTagUrl:"https://kiwi53.leiki.com/focus/api?method=analyse&apikey=eb426404-1a17-4a1f-ac26-d2b2f32d07c3",targetUrl:"",testUrl:"",testEnv:!1,personalTabs:[],contextualTabs:[]}},props:{apiUrl:{required:!0,type:String},language:{required:!0,type:String},common:{required:!0,type:Object}},mixins:[s.a,r.a],methods:{searchCategories:function(){o()(this.leikiCategoryUrl+"&text="+this.searchTermCategories+"&lang="+this.language+"&format=jsonp",{param:"jsonp"},function(e,t){if(e)console.log("searchCategories error: "),console.log(e.message);else{var i=new CustomEvent("leiki-data",{detail:{data:t,name:"searchCategories"}});window.dispatchEvent(i)}})},searchResults:function(){var e=this.getTtypeQuery(),t=this.getAdditionalCatQuery();o()(this.leikiResultUrl+"&lang="+this.language+e+t+"&format=jsonp&query="+this.searchTermResults,{param:"jsonp"},function(e,t){if(e)console.log("searchResults error: "),console.log(e.message);else{var i=new CustomEvent("leiki-data",{detail:{data:t,name:"searchResults"}});window.dispatchEvent(i)}})},searchTags:function(){""!==this.targetUrl?o()(this.leikiTagUrl+"&target="+this.targetUrl+"&lang="+this.language+"&format=jsonp",{param:"jsonp"},function(e,t){if(e)console.log("searchTags error: "),console.log(e.message);else{var i=new CustomEvent("leiki-data",{detail:{data:t,name:"searchTags"}});window.dispatchEvent(i)}}):this.debug("targetUrl cannot be empty")},getPersonalWidget:function(){window._leikiw=window._leikiw||[],this.testEnv?window._leikiw.push({name:"kokeilunpaikka1p",server:"//tarkkailija.leiki.com/focus",referer:this.testUrl,cid:this.testUrl,isJson:!0,jsonCallback:function(e){var t=new CustomEvent("leiki-data",{detail:{data:e,name:"getPersonalWidget"}});window.dispatchEvent(t)}}):window._leikiw.push({name:"kokeilunpaikka1p",server:"//tarkkailija.leiki.com/focus",isJson:!0,jsonCallback:function(e){var t=new CustomEvent("leiki-data",{detail:{data:e,name:"getPersonalWidget"}});window.dispatchEvent(t)}});var e=(new Date).getTime();o()("//tarkkailija.leiki.com/focus/widgets/loader/loader-min.js?t="+e,{param:"jsonp"},function(e,t){e?console.error(e.message):console.log(t)})},getContextualWidget:function(){window._leikiw=window._leikiw||[],this.testEnv?window._leikiw.push({name:"kokeilunpaikka1c",server:"//tarkkailija.leiki.com/focus",referer:this.testUrl,cid:this.testUrl,isJson:!0,jsonCallback:function(e){var t=new CustomEvent("leiki-data",{detail:{data:e,name:"getContextualWidget"}});window.dispatchEvent(t)}}):window._leikiw.push({name:"kokeilunpaikka1c",server:"//tarkkailija.leiki.com/focus",isJson:!0,jsonCallback:function(e){var t=new CustomEvent("leiki-data",{detail:{data:e,name:"getContextualWidget"}});window.dispatchEvent(t)}});var e=(new Date).getTime();o()("//tarkkailija.leiki.com/focus/widgets/loader/loader-min.js?t="+e,{param:"jsonp"},function(e,t){e?console.error(e.message):console.log(t)})},getTtypeQuery:function(){return"&t_type=kokeilunpaikka&t_type=innokyla&t_type=ratkaisu100"},getAdditionalCatQuery:function(){return""},leikiDataEvent:function(e){this.debug("leiki data: "),this.debug(e.detail),"searchCategories"===e.detail.name&&this.processSearchCategories(e.detail.data),"searchResults"===e.detail.name&&this.processSearchResults(e.detail.data),"searchTags"===e.detail.name&&this.processSearchTags(e.detail.data),"getContextualWidget"===e.detail.name&&this.processGetContextualWidget(e.detail.data),"getPersonalWidget"===e.detail.name&&this.processGetPersonalWidget(e.detail.data)},processSearchCategories:function(e){if("ok"===e.status){if(e.hasOwnProperty("data")&&(this.categories=[],e.data.hasOwnProperty("matches")))for(var t=0;t<e.data.matches.length;t++)e.data.matches[t].hasOwnProperty("match")&&e.data.matches[t].match[0]&&this.categories.push(e.data.matches[t].match[0])}else this.debug("error: "+e.details.errorCode+":"+e.details.errorMsg)},processSearchResults:function(e){if("ok"===e.status){if(e.hasOwnProperty("data")&&e.data.hasOwnProperty("items")){this.results=[];for(var t=0;t<e.data.items.length;t++)this.results.push(e.data.items[t])}}else this.debug("error: "+e.details.errorCode+":"+e.details.errorMsg)},processSearchTags:function(e){if("ok"===e.status){if(e.hasOwnProperty("data")&&e.data.hasOwnProperty("items")){this.tags=[];for(var t=0;t<e.data.items.length;t++)this.tags.push(e.data.items[t])}}else this.debug("error: "+e.details.errorCode+":"+e.details.errorMsg)},processGetContextualWidget:function(e){e.hasOwnProperty("tabs")&&(this.contextualTabs=e.tabs)},processGetPersonalWidget:function(e){e.hasOwnProperty("tabs")&&(this.personalTabs=e.tabs)},leikiOnClick:function(e){window.leikiComLoader.Widget.onClick(this,e)}},created:function(){window.addEventListener("leiki-data",this.leikiDataEvent)},mounted:function(){this.showMountedMessage(this)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(1),r=i(79),n=i.n(r);t.default={name:"leiki",data:function(){return{leikiData:{tabs:[{items:[{}]},{items:[{}]}]}}},props:{testUrl:{required:!1,default:!1}},mixins:[s.a],methods:{setup:function(){this.setupLeiki()},setupLeiki:function(){window._leikiw=window._leikiw||[],this.testUrl?window._leikiw.push({name:"kokeilunpaikka1c",server:"//tarkkailija.leiki.com/focus",referer:this.testUrl,cid:this.testUrl,isJson:!0,jsonCallback:function(e){var t=new CustomEvent("leiki-data",{detail:e});window.dispatchEvent(t)}}):window._leikiw.push({name:"kokeilunpaikka1c",server:"//tarkkailija.leiki.com/focus",isJson:!0,jsonCallback:function(e){var t=new CustomEvent("leiki-data",{detail:e});window.dispatchEvent(t)}}),this.getLeikiScript()},getLeikiScript:function(){var e=(new Date).getTime();n()("//tarkkailija.leiki.com/focus/widgets/loader/loader-min.js?t="+e,null,function(e,t){e?console.error(e.message):console.log(t)})},leikiDataEvent:function(e){this.debug("leiki data: "),this.debug(e.detail),this.leikiData=e.detail},leikiOnClick:function(e){window.leikiComLoader.Widget.onClick(this,e)}},created:function(){window.addEventListener("leiki-data",this.leikiDataEvent)},mounted:function(){this.showMountedMessage(this),this.setup()}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(1);t.default={name:"links",data:function(){return{}},props:{links:{required:!0,type:Array},facebookIconPath:{required:!1,type:String},twitterIconPath:{required:!1,type:String},instagramIconPath:{required:!1,type:String},linkedinIconPath:{required:!1,type:String},emailIconPath:{required:!1,type:String},wwwIconPath:{required:!1,type:String}},mixins:[s.a],methods:{getLinkClass:function(e){switch(this.identifyUrl(e.url)){case"facebook":return"facebook";case"twitter":return"tweet";case"linkedin":return"linkedin";case"instagram":return"instagram";case"email":return"mail";case"www":return"www";default:return""}},getBackgroundImage:function(e){switch(this.identifyUrl(e.url)){case"facebook":if(this.facebookIconPath)return this.facebookIconPath;break;case"twitter":if(this.twitterIconPath)return this.twitterIconPath;break;case"linkedin":if(this.linkedinIconPath)return this.linkedinIconPath;break;case"instagram":if(this.instagramIconPath)return this.instagramIconPath;break;case"email":if(this.emailIconPath)return this.emailIconPath;break;case"www":if(this.wwwIconPath)return this.wwwIconPath;break;default:return""}},identifyUrl:function(e){if(e.split("@").length>1)return"email";var t=document.createElement("a");t.href=e;for(var i=t.hostname.split("."),s=0;s<i.length;s++){switch(i[s]){case"facebook":return"facebook";case"twitter":return"twitter";case"linkedin":return"linkedin";case"instagram":return"instagram"}}return"www"}},mounted:function(){this.showMountedMessage(this)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(1);t.default={name:"modal",data:function(){return{showModal:!1,redirectPath:!1}},props:{modalId:{required:!0,type:String}},mixins:[s.a],methods:{setShowModal:function(e){this.showModal=e},setRedirectPath:function(e){this.redirectPath=e}},created:function(){this.$root.eventBus.$on("showModal",function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e===this.modalId&&(this.setShowModal(t),i&&this.setRedirectPath(i))}.bind(this))},mounted:function(){var e=this;this.showMountedMessage(this),document.addEventListener("keydown",function(t){27===t.keyCode&&e.showModal&&e.setShowModal(!1)})}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=i(1);t.default={name:"navbar",data:function(){return{}},mixins:[s.a,r.a],methods:{setup:function(){this.getUserData()}},created:function(){this.$root.eventBus.$on("login",function(){this.setup()}.bind(this)),this.$root.eventBus.$on("logout",function(){this.setup()}.bind(this)),this.$root.eventBus.$on("profile",function(){this.setup()}.bind(this))},mounted:function(){this.showMountedMessage(this),this.setup()}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(1);t.default={name:"notification-message",data:function(){return{}},props:{status:{required:!0,type:String}},mixins:[s.a],computed:{message:function(){return this.$slots.default?this.$slots.default[0].text:(this.debug("notification-message <slot> tag is missing."),"")}},mounted:function(){this.showMountedMessage(this,"("+this.status+")")}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(21),r=i(2),n=i(1);t.default={name:"password-reset",data:function(){return{email:"",newPassword:"",retypePassword:"",showErrors:!1,responseStatus:{}}},props:{apiUrl:{required:!0,type:String},resetToken:{required:!1,default:!1},redirectUrl:{required:!1,default:!1}},mixins:[s.a,r.a,n.a],notifications:{resetPasswordNotification:{},changePasswordNotification:{}},methods:{setup:function(){this.resetToken?this.debug("got reset token: "+this.resetToken):this.debug("reset token not present")},validateForm:function(e){this.resetToken?this.setNewPassword(e):this.sendResetEmail(e)},sendResetEmail:function(e){var t=this;this.$validator.validateAll().then(function(i){if(i){t.debug("reset email form is valid");var s={email:t.email};t.resetPassword(e,s)}else t.showErrors=!0,t.debug("profile form has errors")})},setNewPassword:function(e){var t=this;this.$validator.validateAll().then(function(i){if(i){t.debug("change password form is valid");var s={email:t.email,password_reset_token:t.resetToken,new_password:t.newPassword};t.changePassword(e,s)}else t.showErrors=!0,t.debug("change password form has errors")})},resetPassword:function(e,t){var i=this,s=this.getAuthorizationHeaderMixin();this.resetPasswordMixin(e,t,s).then(function(e){i.debug("resetPasswordMixin response: "),i.debug(i.getResponseData(e)),i.responseStatus=i.setResponseStatus(i.responseStatus,e,"resetPassword")},function(e){i.debug("resetPasswordMixin error: "),i.debug(i.getResponseMessage(e.response)),i.responseStatus=i.setResponseStatus(i.responseStatus,e.response,"resetPassword");var t=i.getErrorMessage(i,e.response);i.resetPasswordNotification({message:t,timeout:5e3,type:"error"})})},changePassword:function(e,t){var i=this,s=this.getAuthorizationHeaderMixin();this.changePasswordMixin(e,t,s).then(function(e){i.debug("changePasswordMixin response: "),i.debug(i.getResponseData(e)),i.responseStatus=i.setResponseStatus(i.responseStatus,e,"changePassword")},function(e){i.debug("changePasswordMixin error: "),i.debug(i.getResponseMessage(e.response)),i.responseStatus=i.setResponseStatus(i.responseStatus,e.response,"changePassword");var t=i.getErrorMessage(i,e.response);i.changePasswordNotification({message:t,timeout:5e3,type:"error"})})}},computed:{isEmailModified:function(){return""!==this.email},isChangePasswordFormModified:function(){return""!==this.email||""!==this.newPassword}},mounted:function(){this.showMountedMessage(this),this.setup()}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(21),r=i(11),n=i(2),o=i(1);t.default={name:"profile-index",data:function(){return{profile:this.common.placeholders.profile_preview,profiles:[],searchTerm:"",filterOptions:[],tagsForExperiments:[],responseStatus:{},currentSortObject:!1,currentSortOptionKey:!1}},props:{apiUrl:{required:!0,type:String},language:{required:!0,type:String},placeholderImageUrl:{required:!1,default:!1},limit:{required:!1},userIds:{required:!1},getTag:{required:!1,default:!1},getLimit:{required:!1,default:!1},getOffset:{required:!1,default:!1},sortProfilesObject:{required:!1,type:Array},usersFilterArray:{required:!1,type:Array},common:{required:!0,type:Object}},mixins:[s.a,r.a,n.a,o.a],notifications:{getUsersPreviewNotification:{}},methods:{setup:function(){if(this.usersFilterArray&&0!==this.usersFilterArray.length)for(var e=0;e<this.usersFilterArray.length;e++){var t=this.usersFilterArray[e];t.selected=!1,this.filterOptions.push(t)}if(this.sortProfilesObject&&0!==this.sortProfilesObject.length)for(var i=0;i<this.sortProfilesObject.length;i++)!0===this.sortProfilesObject[i].initial&&(this.$set(this,"currentSortObject",this.sortProfilesObject[i]),this.$set(this,"currentSortOptionKey",this.sortProfilesObject[i].key));var s=[];this.getTag&&s.push({tag:this.getTag}),this.getLimit&&s.push({limit:this.getLimit}),this.getOffset&&s.push({offset:this.getOffset}),this.getUsersPreview(this.apiUrl,s),this.getTagsForExperiments(this.apiUrl,this.language)},getUsersPreview:function(e,t){var i=this;this.getUsersPreviewMixin(e,t).then(function(e){i.debug("getUsersPreviewMixin response: "),i.debug(i.getResponseData(e)),i.responseStatus=i.setResponseStatus(i.responseStatus,e,"getUsersPreview"),e.hasOwnProperty("data")&&e.data.hasOwnProperty("previews")&&(i.profiles=e.data.previews)},function(e){i.debug("getUsersPreviewMixin error: "),i.debug(i.getResponseMessage(e.response)),i.responseStatus=i.setResponseStatus(i.responseStatus,e.response,"getUsersPreview");var t=i.getErrorMessage(i,e.response);i.getUsersPreviewNotification({message:t,timeout:5e3,type:"error"})})},getTagsForExperiments:function(e,t){var i=this;this.getTagsForExperimentsMixin(e,t).then(function(e){i.debug("getTagsForExperimentsMixin response: "),i.debug(i.getResponseData(e)),i.responseStatus=i.setResponseStatus(i.responseStatus,e,"getTagsForExperiments"),e.hasOwnProperty("data")?e.data.hasOwnProperty("tags")&&(i.tagsForExperiments=e.data.tags):i.debug("hasOwnProperty(data.tags) error: ")},function(e){i.debug("getTagsForExperimentsMixin error: "),i.debug(i.getResponseMessage(e.response)),i.responseStatus=i.setResponseStatus(i.responseStatus,e.response,"getTagsForExperiments");var t=i.getErrorMessage(i,e.response);i.getTagsForExperimentsNotification({message:t,timeout:5e3,type:"error"})})},getUserName:function(e){return e.first_name+" "+e.last_name},sliceProfiles:function(e,t,i){return 0!==parseInt(i)?(this.debug("limiting profile quantity to: "+i),this.debug(e),this.debug(e.slice(t,i)),e.slice(t,i)):e.slice(t)},filterById:function(e,t){if(t){var i=t.split(",");return e.filter(function(e){if("all"===t)return!0;this.debug("limiting profile IDs to: "+t);for(var s=0;s<i.length;s++)if(i[s].trim()===e.user_id)return!0})}return e},keywordFilter:function(e,t){return""!==t&&" "!==t?(this.debug("serching profiles by keyword: "+t),e.filter(function(e){for(var i=e.first_name?e.first_name:"",s=e.last_name?e.last_name:"",r=i.toLowerCase()+" "+s.toLowerCase(),n=e.short_description?e.short_description:"",o=n.toLowerCase(),a="",u=0;u<e.tags.length;u++)a+=e.tags[u].label+" ";if(-1!==r.indexOf(t.toLowerCase())||-1!==o.indexOf(t.toLowerCase())||-1!==a.indexOf(t.toLowerCase()))return!0})):e},searchProfiles:function(){this.keywordFilter(this.profiles,this.searchTerm)},filterOptionsContain:function(e){if(!this.filterOptions)return!1;if(this.filterOptions.length>0)for(var t=0;t<this.filterOptions.length;t++)if(this.filterOptions[t].key===e)return this.filterOptions[t].selected},sortProfiles:function(e){return this.currentSortObject?"oldest"===this.currentSortObject.key?(this.debug("sorting by oldest"),this.sortProfilesById(e,"asc")):"newest"===this.currentSortObject.key?(this.debug("sorting by newest"),this.sortProfilesById(e,"desc")):void this.debug("unsupported sorting option"):e},sortProfilesById:function(e,t){return"desc"===t?e.sort(function(e,t){var i=parseInt(e.user_id),s=parseInt(t.user_id);return i>s?-1:i<s?1:0}):"asc"===t?e.sort(function(e,t){var i=parseInt(e.user_id),s=parseInt(t.user_id);return i<s?-1:i>s?1:0}):void this.debug("unsupported sorting direction")},triggerSort:function(e){if(0!==this.sortProfilesObject.length)for(var t=0;t<this.sortProfilesObject.length;t++)e.key===this.sortProfilesObject[t].key&&this.$set(this,"currentSortObject",this.sortProfilesObject[t])}},computed:{placeholderImage:function(){return this.placeholderImageUrl?this.placeholderImageUrl:this.common.placeholders.defaultPlaceholderImageUrl},getTagLabelFromId:function(){for(var e=0;e<this.tagsForExperiments.length;e++)if(this.tagsForExperiments[e].id===parseInt(this.getTag))return this.tagsForExperiments[e].label}},mounted:function(){this.showMountedMessage(this),this.setup()}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(37),r=i.n(s),n=i(22),o=i.n(n),a=i(11),u=i(71),d=i(21),p=i(2),g=i(1);t.default={name:"profile-page",data:function(){return{profile:this.common.placeholders.profile,profileFirstName:"",profileLastName:"",profileShortDescription:"",profileLinks:[],showPasswordEditor:!1,showProfileEditor:!1,showLinksEditor:!1,showSkillsEditor:!1,imageBody:null,showSpindle:!1,imageLoaded:!1,credentials:{newPassword:"",oldPassword:""},retypePassword:"",showProfileErrors:!1,showLinksErrors:!1,showPasswordErrors:!1,responseStatus:{},tagsForExperiments:[],newSkill:"",selectedSkills:[]}},props:{apiUrl:{required:!0,type:String},userId:{required:!0,type:String},language:{required:!0,type:String},profileProp:{required:!1,default:!1},placeholderImageUrl:{required:!1,default:!1},logoutRedirectPath:{required:!1,default:!1},common:{required:!0,type:Object}},mixins:[a.a,u.a,d.a,p.a,g.a],notifications:{getProfileNotification:{},updateProfileNotification:{},updateProfileImageNotification:{},updatePasswordNotification:{},setUserLinksNotification:{},setTagsForUserNotification:{},setSkillsForUserNotification:{}},methods:{setup:function(){this.profileProp?(this.debug("profile-page using the profile prop"),this.profile=this.profileProp,this.profileFirstName=this.profileProp.first_name,this.profileLastName=this.profileProp.last_name,this.profileShortDescription=this.profileProp.short_description,this.profileLinks=JSON.parse(o()(this.profile.links))):this.userId?(this.debug("profile-page fetching its own profile"),this.getProfile(this.apiUrl,this.userId)):this.debug("need to provide user id or profile prop")},getProfile:function(e,t){var i=this;if("me"===t)this.getMyProfile(e);else{var s=this.getAuthorizationHeaderMixin();this.getProfileMixin(e,t,s).then(function(t){i.debug("getProfileMixin response: "),i.debug(i.getResponseData(t)),i.responseStatus=i.setResponseStatus(i.responseStatus,t,"getProfile"),t.hasOwnProperty("data")&&t.data.hasOwnProperty("profile")&&(i.$set(i,"profile",t.data.profile),i.selectedSkills=i.profile.skills.slice(),t.data.profile.hasOwnProperty("experiments")&&i.sortExperiments()),i.profileFirstName=i.profile.first_name,i.profileLastName=i.profile.last_name,i.profileShortDescription=i.profile.short_description,i.profileLinks=JSON.parse(o()(i.profile.links)),i.isEditable&&i.getTagsForExperiments(e,i.language)},function(e){i.debug("getProfileMixin error: "),i.debug(i.getResponseMessage(e.response)),i.responseStatus=i.setResponseStatus(i.responseStatus,e.response,"getProfile");var t=i.getErrorMessage(i,e.response);i.getProfileNotification({message:t,timeout:5e3,type:"error"})})}},getMyProfile:function(e){var t=this,i=this.getAuthorizationHeaderMixin();this.getMyProfileMixin(e,i).then(function(i){t.debug("getMyProfileMixin response: "),t.debug(t.getResponseData(i)),t.responseStatus=t.setResponseStatus(t.responseStatus,i,"getMyProfile"),i.hasOwnProperty("data")&&i.data.hasOwnProperty("profile")&&(t.$set(t,"profile",i.data.profile),t.selectedSkills=t.profile.skills.slice(),i.data.profile.hasOwnProperty("experiments")&&t.sortExperiments()),t.profileFirstName=t.profile.first_name,t.profileLastName=t.profile.last_name,t.profileShortDescription=t.profile.short_description,t.profileLinks=JSON.parse(o()(t.profile.links)),t.isEditable&&t.getTagsForExperiments(e,t.language)},function(e){t.debug("getMyProfileMixin error: "),t.debug(t.getResponseMessage(e.response)),t.responseStatus=t.setResponseStatus(t.responseStatus,e.response,"getMyProfile");var i=t.getErrorMessage(t,e.response);t.getProfileNotification({message:i,timeout:5e3,type:"error"})})},updateProfile:function(e){var t=this;this.$validator.validateAll("update-profile-form").then(function(i){if(i){t.debug("profile form is valid");var s={};t.isProfileModified?(t.profileFirstName!==t.profile.first_name&&(s.first_name=t.profileFirstName,t.profile.first_name=t.profileFirstName),t.profileLastName!==t.profile.last_name&&(s.last_name=t.profileLastName,t.profile.last_name=t.profileLastName),t.profileShortDescription!==t.profile.short_description&&(s.short_description=t.profileShortDescription,t.profile.short_description=t.profileShortDescription),r()(s).length>0&&t.updateMyProfile(e,s),t.imageBody&&t.updateProfileImage(),t.showProfileEditor=!1):t.debug("profile form not modified")}else t.showProfileErrors=!0,t.debug("profile form has errors")})},updateMyProfile:function(e,t){var i=this,s=this.getAuthorizationHeaderMixin();this.updateMyProfileMixin(e,t,s).then(function(e){i.debug("updateMyProfileMixin response: "),i.debug(i.getResponseData(e)),i.responseStatus=i.setResponseStatus(i.responseStatus,e,"updateMyProfile"),i.$root.eventBus.$emit("doProfile")},function(e){i.debug("updateMyProfileMixin error: "),i.debug(i.getResponseMessage(e.response)),i.responseStatus=i.setResponseStatus(i.responseStatus,e.response,"updateMyProfile");var t=i.getErrorMessage(i,e.response);i.updateProfileNotification({message:t,timeout:5e3,type:"error"})})},updateProfileImage:function(){var e=this,t=this.getErrorMessage(this,{data:{status:"saving_image",message:"Saving image."}});this.updateProfileImageNotification({message:t,timeout:5e3,type:"info"});var i=this.getAuthorizationHeaderMixin();this.uploadImageFileMixin(this.apiUrl,this.imageBody,i).then(function(t){if(e.debug("uploadImageFileMixin response: "),e.debug(e.getResponseData(t)),e.responseStatus=e.setResponseStatus(e.responseStatus,t,"uploadImageFile"),t.hasOwnProperty("data")&&t.data.hasOwnProperty("image")&&t.data.image.hasOwnProperty("filename"))var i={image_collection:{profile:{filename:t.data.image.filename}}};e.imageBody=null,e.updateMyProfileImageCollection(e.apiUrl,i);var s=e.getErrorMessage(e,{data:{status:"image_saved",message:"Image saved."}});e.updateProfileImageNotification({message:s,timeout:5e3,type:"success"})},function(t){e.debug("uploadImageFileMixin error: "),e.debug(e.getResponseMessage(t.response)),e.responseStatus=e.setResponseStatus(e.responseStatus,t.response,"uploadImageFile");var i=e.getErrorMessage(e,t.response);e.updateProfileImageNotification({message:i,timeout:5e3,type:"error"})})},updateMyProfileImageCollection:function(e,t){var i=this,s=this.getAuthorizationHeaderMixin();this.updateMyProfileImageCollectionMixin(e,t,s).then(function(t){i.debug("updateMyProfileImageCollectionMixin response: "),i.debug(i.getResponseData(t)),i.responseStatus=i.setResponseStatus(i.responseStatus,t,"updateMyProfileImageCollection"),i.profile.image_collection={profile:{url:""}},i.showSpindle=!0,i.getMyProfile(e)},function(e){i.debug("updateMyProfileImageCollectionMixin error: "),i.debug(i.getResponseMessage(e.response)),i.responseStatus=i.setResponseStatus(i.responseStatus,e.response,"updateMyProfileImageCollection");var t=i.getErrorMessage(i,e.response);i.updateProfileImageNotification({message:t,timeout:5e3,type:"error"})})},updateMyPassword:function(e){var t=this;this.$validator.validateAll("update-password-form").then(function(i){if(i)if(t.credentials.newPassword!==t.credentials.oldPassword){t.debug("update password form is valid"),t.showPasswordEditor=!1;var s={new_password:t.credentials.newPassword,old_password:t.credentials.oldPassword},r=t.getAuthorizationHeaderMixin();t.changeMyPasswordMixin(e,s,r).then(function(e){t.debug("changeMyPasswordMixin response: "),t.debug(t.getResponseData(e)),t.responseStatus=t.setResponseStatus(t.responseStatus,e,"changeMyPassword");var i=t.getErrorMessage(t,{data:{status:"password_updated",message:"Password updated."}});t.updateProfileImageNotification({message:i,timeout:5e3,type:"success"})},function(e){t.debug("changeMyPasswordMixin error: "),t.debug(t.getResponseMessage(e.response)),t.responseStatus=t.setResponseStatus(t.responseStatus,e.response,"changeMyPassword");var i=t.getErrorMessage(t,e.response);t.updateProfileImageNotification({message:i,timeout:5e3,type:"error"})})}else t.debug("old password is the same as new password");else t.showPasswordErrors=!0,t.debug("update password form has errors")})},setUserLinks:function(e,t){var i=this,s=this.getAuthorizationHeaderMixin();this.setUserLinksMixin(e,t,s).then(function(s){i.debug("setUserLinksMixin response: "),i.debug(i.getResponseData(s)),i.responseStatus=i.setResponseStatus(i.responseStatus,s,"setUserLinks"),i.profileLinks=JSON.parse(o()(t)),i.getMyProfile(e)},function(e){i.debug("setUserLinksMixin error: "),i.debug(i.getResponseMessage(e.response)),i.responseStatus=i.setResponseStatus(i.responseStatus,e.response,"setUserLinks");var t=i.getErrorMessage(i,e.response);i.setUserLinksNotification({message:t,timeout:5e3,type:"error"})})},updateProfileLinks:function(e){var t=this;this.$validator.validateAll("update-profile-links-form").then(function(i){if(i){t.debug("profile links form is valid");var s={};if(t.areLinksModified){for(var r=[],n=0;n<t.profileLinks.length;n++)if(""!==t.profileLinks[n].url||""!==t.profileLinks[n].title){var o={url:t.profileLinks[n].url,title:t.profileLinks[n].title};r.push(o)}s.links=r,t.setUserLinks(e,s),t.showLinksEditor=!1}else t.debug("profile links form not modified")}else t.showLinksErrors=!0,t.debug("profile links form has errors")})},getTagsForExperiments:function(e,t){var i=this;this.getTagsForExperimentsMixin(e,t).then(function(e){i.debug("getTagsForExperimentsMixin response: "),i.debug(i.getResponseData(e)),i.responseStatus=i.setResponseStatus(i.responseStatus,e,"getTagsForExperiments"),e.hasOwnProperty("data")?e.data.hasOwnProperty("tags")&&(i.tagsForExperiments=e.data.tags):i.debug("hasOwnProperty(data.tags) error: ")},function(e){i.debug("getTagsForExperimentsMixin error: "),i.debug(i.getResponseMessage(e.response)),i.responseStatus=i.setResponseStatus(i.responseStatus,e.response,"getTagsForExperiments");var t=i.getErrorMessage(i,e.response);i.getTagsForExperimentsNotification({message:t,timeout:5e3,type:"error"})})},setTagsForUser:function(e,t){var i=this,s=this.getAuthorizationHeaderMixin();this.setTagsForUserMixin(e,t,s).then(function(e){i.debug("setTagsForUserMixin response: "),i.debug(i.getResponseData(e)),i.responseStatus=i.setResponseStatus(i.responseStatus,e,"setTagsForUser")},function(e){i.debug("setTagsForUserMixin error: "),i.debug(i.getResponseMessage(e.response)),i.responseStatus=i.setResponseStatus(i.responseStatus,e.response,"setTagsForUser");var t=i.getErrorMessage(i,e.response);i.setTagsForUserNotification({message:t,timeout:5e3,type:"error"})})},setSkillsForUser:function(e){var t=this,i=this.getAuthorizationHeaderMixin();this.profile.skills=this.selectedSkills.slice();var s={skills:this.selectedSkills};this.setSkillsForUserMixin(e,s,i).then(function(e){t.debug("setSkillsForUserMixin response: "),t.debug(t.getResponseData(e)),t.responseStatus=t.setResponseStatus(t.responseStatus,e,"setSkillsForUser"),t.showSkillsEditor=!1},function(e){t.debug("setSkillsForUserMixin error: "),t.debug(t.getResponseMessage(e.response)),t.responseStatus=t.setResponseStatus(t.responseStatus,e.response,"setSkillsForUser");var i=t.getErrorMessage(t,e.response);t.setSkillsForUserNotification({message:i,timeout:5e3,type:"error"})})},userTagsAdded:function(e,t){this.debug("adding tags to user"),this.debug(e),this.debug(t),this.profile.tags=[];for(var i=0;i<e.length;i++)this.profile.tags.push(e[i]);var s={tags:t};this.setTagsForUser(this.apiUrl,s)},onImageLoad:function(){this.debug("image loaded"),this.showSpindle=!1,this.imageLoaded=!0},setImage:function(e){this.imageBody=e},sortExperiments:function(){this.profile.experiments.sort(function(e,t){return e.stage-t.stage==0?e.experiment_id-t.experiment_id:e.stage-t.stage})},initializeProfileEditor:function(){var e=this;!1===this.showProfileEditor&&(this.showProfileEditor=!0,this.$nextTick(function(){e.$refs.profileInputRef&&e.$refs.profileInputRef.focus()}))},resetProfileEditor:function(){!0===this.showProfileEditor&&(this.showProfileEditor=!1,this.isProfileModified&&(this.profileFirstName=this.profile.first_name,this.profileLastName=this.profile.last_name,this.profileShortDescription=this.profile.short_description,this.imageBody=null,this.$refs.imageUploadRef&&this.$refs.imageUploadRef.$refs.imageInputRef&&(this.$refs.imageUploadRef.$refs.imageInputRef.value=null)))},initializeLinksEditor:function(){!1===this.showLinksEditor&&(this.showLinksEditor=!0)},resetLinksEditor:function(){!0===this.showLinksEditor&&(this.showLinksEditor=!1,this.areLinksModified&&(this.profileLinks=JSON.parse(o()(this.profile.links))))},initializeSkillsEditor:function(){!1===this.showSkillsEditor&&(this.showSkillsEditor=!0)},resetSkillsEditor:function(){!0===this.showSkillsEditor&&(this.showSkillsEditor=!1,this.areSkillsModified&&(this.selectedSkills=this.profile.skills.slice()))},initializePasswordEditor:function(){var e=this;!1===this.showPasswordEditor&&(this.showPasswordEditor=!0,this.$nextTick(function(){e.$refs.passwordInputRef&&e.$refs.passwordInputRef.focus()}))},resetPasswordEditor:function(){!0===this.showPasswordEditor&&(this.showPasswordEditor=!1,this.isPasswordModified&&(this.credentials.oldPassword="",this.credentials.newPassword="",this.retypePassword=""),this.errors.clear())},getLanguage:function(e){return this.profile.hasOwnProperty(e)?this.profile[e]:null},profileLanguageUpdated:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.debug("profileLanguageUpdated");for(var t in e)this.$set(this.profile,t,e[t]);this.updateMyProfile(this.apiUrl,e)},addLinkField:function(){var e={url:"",title:""};this.profileLinks.push(e)},removeLinkField:function(e){this.profileLinks.splice(e,1)},addNewSkill:function(){this.isNewSkillModified&&(this.selectedSkills.push(this.newSkill),this.newSkill="")},removeSkill:function(e){this.selectedSkills.splice(e,1)}},computed:{userName:function(){return this.profile.first_name+" "+this.profile.last_name},placeholderImage:function(){return this.placeholderImageUrl?this.placeholderImageUrl:this.common.placeholders.defaultPlaceholderImageUrl},isEditable:function(){var e=this.getLocalStorageObjectMixin("userData");if(e&&e.hasOwnProperty("user_id"))return this.isUserAuthenticated&&"me"===this.userId||this.isUserAuthenticated&&parseInt(this.userId)===e.user_id},isProfileModified:function(){return!(this.profileFirstName===this.profile.first_name&&this.profileLastName===this.profile.last_name&&this.profileShortDescription===this.profile.short_description&&!this.imageBody)},areLinksModified:function(){if(this.profile.hasOwnProperty("links")&&this.profile.links&&0!==this.profile.links.length)return o()(this.profile.links)!==o()(this.profileLinks);if(0!==this.profileLinks.length)for(var e=0;e<this.profileLinks.length;e++)if(""!==this.profileLinks[e].url||""!==this.profileLinks[e].title)return!0;return!1},isPasswordModified:function(){return""!==this.credentials.oldPassword&&""!==this.credentials.newPassword&&""!==this.retypePassword},isNewSkillModified:function(){return""!==this.newSkill},areSkillsModified:function(){return o()(this.selectedSkills)!==o()(this.profile.skills)}},created:function(){this.$root.eventBus.$on("login",function(){this.setup()}.bind(this)),this.$root.eventBus.$on("logout",function(){this.logoutRedirectPath&&"me"===this.userId&&this.openUrl(this.logoutRedirectPath+this.profile.user_id+"/"),this.setup()}.bind(this))},mounted:function(){this.showMountedMessage(this),this.setup()}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(22),r=i.n(s),n=i(34),o=i.n(n),a=i(160),u=i(162),d=i(2),p=i(1);t.default={name:"reward-index",data:function(){return{reward:this.common.placeholders.reward,rewards:[],campaign:null,responseStatus:{},showAddRewardEditor:!1,rewardAmount:"",rewardTitle:"",rewardDescription:"",rewardStock:"",customQuestion:"",customQuestions:[],stockLimited:!1,imageBody:null,showAddRewardErrors:!1,editRewardStock:!1,editRewardQuestions:!1,editRewardImage:!1,askForAddress:!1,editRewardAddress:!1,selectedWithoutReward:!1}},props:{apiUrl:{required:!1,type:String},language:{required:!0,type:String},campaignId:{required:!1,type:String},placeholderImageUrl:{required:!1,default:!1},selectedRewardId:{required:!1,type:String},initialCustomRewardAmount:{required:!1,type:String},common:{required:!0,type:Object},phpLogin:{required:!1,type:Boolean,default:!1}},mixins:[a.a,u.a,d.a,p.a],notifications:{getCampaignNotification:{},createRewardNotification:{},updateRewardNotification:{},updateRewardLanguageNotification:{},uploadCampaignFileNotification:{}},methods:{setup:function(){this.campaignId?this.getCampaign(this.apiUrl,this.campaignId,this.language):this.debug("campaign ID not defined")},getCampaign:function(e,t,i){var s=this;this.getCampaignMixin(e,t,i).then(function(e){if(s.debug("getCampaignMixin response:"),s.debug(s.getResponseData(e)),s.responseStatus=s.setResponseStatus(s.responseStatus,e,"getCampaign"),e.hasOwnProperty("data")){if(e.data.hasOwnProperty("campaign")){s.campaign=e.data.campaign;var t=null,i=null;if(e.data.campaign.hasOwnProperty("funding_reached")&&(t=s.campaign.funding_reached),e.data.campaign.hasOwnProperty("stage")&&(i=s.campaign.stage),s.$root.eventBus.$emit("crowdfunding:connected",i,t),e.data.campaign.hasOwnProperty("rewards")&&(s.$set(s,"rewards",e.data.campaign.rewards),s.selectedRewardId))for(var r=0;r<s.rewards.length;r++)s.rewards[r].reward_id===parseInt(s.selectedRewardId)&&s.$emit("reward-selected",s.rewards[r])}e.data.hasOwnProperty("acl")&&(s.$set(s,"acl",e.data.acl),s.setUserAcl())}},function(e){s.debug("getCampaignMixin error: "),s.debug(s.getResponseMessage(e.response)),s.responseStatus=s.setResponseStatus(s.responseStatus,e.response,"getCampaign");var t=s.getErrorMessage(s,e.response);s.getCampaignNotification({message:t,timeout:5e3,type:"error"})})},addReward:function(e,t,i){var s=this;this.$validator.validateAll("add-reward-form").then(function(r){if(r){s.debug("add reward form is valid"),s.showAddRewardErrors=!1;var n=s.getAuthorizationHeaderMixin();s.createRewardMixin(e,t,n).then(function(t){s.debug("createRewardMixin response:"),s.debug(s.getResponseData(t)),s.responseStatus=s.setResponseStatus(s.responseStatus,t,"createReward");var r={reward_id:t.data.reward.reward_id,amount:parseInt(s.rewardAmount),description:s.rewardDescription,title:s.rewardTitle,stock:null,stock_reserved:0,image:null,custom_questions:[]},n={amount:parseInt(s.rewardAmount)};s.isRewardStockModified&&(n.stock=parseInt(s.rewardStock),r.stock=parseInt(s.rewardStock));var a={};if(s.isRewardDescriptionModified&&(a.description=o()({},i,s.rewardDescription)),s.isRewardTitleModified&&(a.title=o()({},i,s.rewardTitle)),s.updateReward(e,t.data.reward.reward_id,n),(s.isRewardDescriptionModified||s.isRewardTitleModified)&&s.updateRewardLanguage(e,t.data.reward.reward_id,a,i),s.isCustomQuestionsModified||s.askForAddress){var u=s.customQuestions;if(s.askForAddress){var d={key:"custom_question_"+u.length+1,text:"ask_for_address"};u.push(d)}var p={custom_questions:o()({},i,u)};s.updateRewardLanguage(e,t.data.reward.reward_id,p,i);for(var g=0;g<p.custom_questions[i].length;g++)r.custom_questions.push(p.custom_questions[i][g])}s.isRewardImageModified&&(r.image="",s.uploadRewardImage(e,s.campaign.campaign_id,t.data.reward.reward_id,s.imageBody)),s.rewards||(s.rewards=[]),s.rewards.push(r),s.showAddRewardEditor=!1,s.editRewardStock=!1,s.editRewardQuestions=!1,s.editRewardImage=!1,s.editRewardAddress=!1},function(e){s.debug("createRewardMixin error: "),s.debug(s.getResponseMessage(e.response)),s.responseStatus=s.setResponseStatus(s.responseStatus,e.response,"createRewardMixin");var t=s.getErrorMessage(s,e.response);s.createRewardNotification({message:t,timeout:5e3,type:"error"})})}else s.debug("add reward form has errors"),s.showAddRewardErrors=!0})},updateReward:function(e,t,i){var s=this,r=this.getAuthorizationHeaderMixin();this.updateRewardMixin(e,t,i,r).then(function(e){s.debug("updateRewardMixin response:"),s.debug(s.getResponseData(e)),s.responseStatus=s.setResponseStatus(s.responseStatus,e,"updateRewardMixin"),i.hasOwnProperty("image")&&s.setRewardImage(t,i.image)},function(e){s.debug("updateRewardMixin error: "),s.debug(s.getResponseMessage(e.response)),s.responseStatus=s.setResponseStatus(s.responseStatus,e.response,"updateRewardMixin");var t=s.getErrorMessage(s,e.response);s.updateRewardNotification({message:t,timeout:5e3,type:"error"})})},updateRewardLanguage:function(e,t,i,s){var r=this,n=this.getAuthorizationHeaderMixin();this.updateRewardLanguageMixin(e,t,i,n).then(function(e){r.debug("updateRewardLanguageMixin response:"),r.debug(r.getResponseData(e)),r.responseStatus=r.setResponseStatus(r.responseStatus,e,"updateRewardLanguageMixin")},function(e){r.debug("updateRewardLanguageMixin error: "),r.debug(r.getResponseMessage(e.response)),r.responseStatus=r.setResponseStatus(r.responseStatus,e.response,"updateRewardLanguageMixin");var t=r.getErrorMessage(r,e.response);r.updateRewardLanguageNotification({message:t,timeout:5e3,type:"error"})})},uploadRewardImage:function(e,t,i,s){var r=this,n=this.getAuthorizationHeaderMixin();this.uploadCampaignFileMixin(e,t,s,n).then(function(t){if(r.debug("uploadCampaignFileMixin response:"),r.debug(r.getResponseData(t)),r.responseStatus=r.setResponseStatus(r.responseStatus,t,"uploadCampaignFileMixin"),t.data.hasOwnProperty("file")&&t.data.file.hasOwnProperty("name")){var s={image:t.data.file.name};r.updateReward(e,i,s)}},function(e){r.debug("uploadCampaignFileMixin error: "),r.debug(r.getResponseMessage(e.response)),r.responseStatus=r.setResponseStatus(r.responseStatus,e.response,"uploadCampaignFileMixin");var t=r.getErrorMessage(r,e.response);r.uploadCampaignFileNotification({message:t,timeout:5e3,type:"error"})})},sortRewards:function(e){return e.slice().sort(function(e,t){return e.amount-t.amount==0?e.reward_id-t.reward_id:e.amount-t.amount})},setImage:function(e){this.imageBody=e},setRewardImage:function(e,t){for(var i=0;i<this.rewards.length;i++)if(this.rewards[i].reward_id===e){this.rewards[i].image="https://s3-eu-west-1.amazonaws.com/kfunddynamic/project_content_pics/"+this.campaign.campaign_id+"/medium/"+t;break}},removeReward:function(e){for(var t=0;t<this.rewards.length;t++)if(this.rewards[t].reward_id===e){var i=this.rewards.indexOf(this.rewards[t]);this.rewards.splice(i,1),this.debug("Removing reward: "+e);break}},initializeAddRewardEditor:function(){!1===this.showAddRewardEditor&&(this.showAddRewardEditor=!0)},resetAddRewardEditor:function(){!0===this.showAddRewardEditor&&(this.showAddRewardEditor=!1,this.rewardAmount="",this.rewardDescription="",this.rewardTitle="",this.rewardStock="",this.customQuestion="",this.customQuestions=[],this.askForAddress=!1,this.stockLimited=!1,this.imageBody=null,this.$refs.imageUploadRef&&this.$refs.imageUploadRef.$refs.imageInputRef&&(this.$refs.imageUploadRef.$refs.imageInputRef.value=null),this.editRewardStock=!1,this.editRewardQuestions=!1,this.editRewardImage=!1,this.editRewardAddress=!1)},addCustomQuestion:function(){var e=1;this.reward.custom_questions?this.reward.custom_questions.length>0&&(e=this.reward.custom_questions.length+1):this.customQuestions&&this.customQuestions.length>0&&(e=this.customQuestions.length+1);var t={key:"custom_question_"+e,text:this.customQuestion};this.customQuestions.push(t),this.customQuestion=""},removeCustomQuestion:function(e){for(var t=0;t<this.customQuestions.length;t++)if(this.customQuestions[t].key===e){var i=this.customQuestions.indexOf(this.customQuestions[t]);this.customQuestions.splice(i,1),this.debug("Removing custom question: "+e);break}for(var s=0;s<this.customQuestions.length;s++)this.customQuestions[s].key="custom_question_"+(s+1)},openRewardUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];2===this.campaign.stage?this.openUrl(e,t):this.debug("this campaign is not currently seeking funds")},selectReward:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isFunding&&(t?this.openUrl(t):(this.$emit("reward-selected",e),this.$root.eventBus.$emit("set-reward-selected",e)))},rewardSelected:function(e){this.$emit("reward-selected",e)}},computed:{placeholderImage:function(){return this.placeholderImageUrl?this.placeholderImageUrl:this.common.placeholders.defaultPlaceholderImageUrl},isFunding:function(){return!!this.campaign&&(2===this.campaign.stage||6===this.campaign.stage)},isRecurring:function(){return!!this.campaign&&6===this.campaign.stage},isRewardAmountModified:function(){return""!==this.rewardAmount},isRewardImageModified:function(){return null!==this.imageBody},isRewardDescriptionModified:function(){return""!==this.rewardDescription},isRewardTitleModified:function(){return""!==this.rewardTitle},isRewardStockModified:function(){return this.stockLimited&&this.isRewardStockNumberModified},isRewardStockNumberModified:function(){return""!==this.rewardStock},isCustomQuestionModified:function(){return""!==this.customQuestion},isCustomQuestionsModified:function(){return r()(this.customQuestions)!==r()([])},isCustomRewardModified:function(){return""!==this.customReward},customQuestionsCount:function(){return this.askForAddress?this.customQuestions.length-1:this.customQuestions.length}},created:function(){this.$root.eventBus.$on("set-reward-selected",function(e){""===e.reward_id?this.selectedWithoutReward=!0:this.selectedWithoutReward=!1}.bind(this)),this.$root.eventBus.$on("select-reward-by-id",function(e){""===e&&this.selectReward({amount:this.initialCustomRewardAmount,reward_id:"",image:null})}.bind(this)),this.$root.eventBus.$on("select-reward-by-amount",function(e){""===e&&this.selectReward({amount:this.initialCustomRewardAmount,reward_id:"",image:null})}.bind(this)),this.$root.eventBus.$on("campaign-id-updated",function(){this.reward=this.common.placeholders.reward,this.rewards=[],this.campaign=null,this.acl=[],this.setup()}.bind(this)),this.$root.eventBus.$on("login",function(){this.setup()}.bind(this)),this.$root.eventBus.$on("logout",function(){this.setup()}.bind(this))},mounted:function(){this.showMountedMessage(this),this.setup()}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(1),r=i(2);t.default={name:"sign-in",data:function(){return{showErrors:!1}},props:{redirectPath:{required:!1,default:!1}},mixins:[r.a,s.a],methods:{validateForm:function(){var e=this;this.$validator.validateAll().then(function(t){t?(e.debug("sign in form is valid"),e.$root.eventBus.$emit("doLogin",e.credentials,e.redirectPath),e.$emit("close")):(e.showErrors=!0,e.debug("sign in form has errors"))})}},mounted:function(){this.showMountedMessage(this)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(1),r=i(2);t.default={name:"sign-out",data:function(){return{}},props:{redirectPath:{required:!1,default:!1}},mixins:[r.a,s.a],methods:{validateForm:function(){this.$root.eventBus.$emit("doLogout",this.redirectPath),this.$emit("close")}},mounted:function(){this.showMountedMessage(this)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(1),r=i(2);t.default={name:"sign-up",data:function(){return{showErrors:!1}},props:{redirectPath:{required:!1,default:!1}},mixins:[r.a,s.a],methods:{validateForm:function(){var e=this;this.$validator.validateAll().then(function(t){t?(e.debug("sign up form is valid"),e.$root.eventBus.$emit("doRegister",e.credentials,e.redirectPath),e.$emit("close")):(e.showErrors=!0,e.debug("sign up form has errors"))})}},mounted:function(){this.showMountedMessage(this)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(22),r=i.n(s),n=i(2),o=i(1);t.default={name:"tags",data:function(){return{selectedTag:"",selectedTags:[],selectedTagsIds:[],searchTerm:"",showEditor:!1}},props:{allTags:{required:!0,type:Array},displayTags:{required:!0,type:Array},common:{required:!0,type:Object}},mixins:[n.a,o.a],methods:{setup:function(){this.selectedTags=[],this.displayTags&&(this.selectedTags=JSON.parse(r()(this.displayTags)),this.selectedTags=this.sortTagsByLabel(this.selectedTags))},initializeEditor:function(){var e=this;!1===this.showEditor&&(this.showEditor=!0,this.$nextTick(function(){e.$refs.searchInputRef&&e.$refs.searchInputRef.focus()}))},addTag:function(e){this.debug("Verifying tag: "+e.id);for(var t=!1,i=0;i<this.selectedTags.length;i++)e.id===this.selectedTags[i].id&&(t=!0,this.debug("tag already added"));t||(this.selectedTags.push(e),this.selectedTags=this.sortTagsByLabel(this.selectedTags),this.debug("tag valid"))},removeTag:function(e){for(var t=0;t<this.selectedTags.length;t++)if(this.selectedTags[t].id===e){var i=this.selectedTags.indexOf(this.selectedTags[t]);this.selectedTags.splice(i,1),this.debug("Removing tag: "+e)}},saveTags:function(){if(this.isModified){for(var e=0;e<this.selectedTags.length;e++)this.selectedTagsIds.push(this.selectedTags[e].id);this.$emit("add-tags",this.selectedTags,this.selectedTagsIds),!0===this.showEditor&&(this.showEditor=!1)}else this.debug("Tags not modified")},resetTags:function(){this.debug("Resetting tags"),!0===this.showEditor&&(this.showEditor=!1),this.setup()},sortTagsByLabel:function(e){return e.sort(function(e,t){var i=e.label.toLowerCase(),s=t.label.toLowerCase();return i<s?-1:i>s?1:0})},tagLabelFilter:function(e,t){return""!==t&&" "!==t?(this.debug("serching tags by keyword: "+t),e.filter(function(e){if(-1!==e.label.toLowerCase().indexOf(t.toLowerCase()))return!0})):e},searchTags:function(){this.tagLabelFilter(this.allTags,this.searchTerm)}},computed:{isModified:function(){if(this.displayTags){var e=JSON.parse(r()(this.displayTags));return e=this.sortTagsByLabel(e),r()(this.selectedTags)!==r()(e)}return 0!==this.selectedTags.length}},watch:{displayTags:function(e){this.setup()}},mounted:function(){this.showMountedMessage(this),this.setup()}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){var s=i(0)(i(185),i(351),null,null,null);e.exports=s.exports},function(e,t,i){var s=i(0)(i(186),i(349),null,null,null);e.exports=s.exports},function(e,t,i){function s(e){i(224)}var r=i(0)(i(187),i(347),s,null,null);e.exports=r.exports},function(e,t,i){var s=i(0)(i(188),i(362),null,null,null);e.exports=s.exports},function(e,t,i){function s(e){i(223)}var r=i(0)(i(189),i(345),s,null,null);e.exports=r.exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vue-street-view-pano-container"},[i("div",{ref:"vue-street-view-pano",staticClass:"vue-street-view-pano"}),e._v(" "),e._t("default")],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vue-map-container"},[i("div",{ref:"vue-map",staticClass:"vue-map"}),e._v(" "),i("div",{staticClass:"vue-map-hidden"},[e._t("default")],2),e._v(" "),e._t("visible")],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{ref:"flyaway"},[e._t("default")],2)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{ref:"input",attrs:{type:"text",placeholder:e.placeholder},domProps:{value:e.value}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",[i("span",{domProps:{textContent:e._s(e.label)}}),e._v(" "),i("input",{ref:"input",class:e.className,attrs:{type:"text",placeholder:e.placeholder}})])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._t("default")],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},staticRenderFns:[]}}],[159]);